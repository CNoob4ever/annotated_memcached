<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>memcached: memcached.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">memcached
   &#160;<span id="projectnumber">0.8</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">memcached.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="memcached_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/* -*- Mode: C; tab-width: 4; c-basic-offset: 4; indent-tabs-mode: nil -*- */</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#ifdef HAVE_CONFIG_H</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#include &quot;config.h&quot;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &lt;sys/types.h&gt;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &lt;sys/socket.h&gt;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &lt;sys/time.h&gt;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &lt;netinet/in.h&gt;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &lt;event.h&gt;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;netdb.h&gt;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &lt;pthread.h&gt;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;unistd.h&gt;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="protocol__binary_8h.html">protocol_binary.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="cache_8h.html">cache.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="sasl__defs_8h.html">sasl_defs.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div>
<div class="line"><a name="l00027"></a><span class="lineno"><a class="code" href="memcached_8h.html#aa5fda8abf3b5d8881d799a8b84091c6c">   27</a></span>&#160;<span class="preprocessor">#define KEY_MAX_LENGTH 250</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00030"></a><span class="lineno"><a class="code" href="memcached_8h.html#a36717cb1bf9d89c9372a92bb37c6d30d">   30</a></span>&#160;<span class="preprocessor">#define INCR_MAX_STORAGE_LEN 24</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00032"></a><span class="lineno"><a class="code" href="memcached_8h.html#ab723c5f0e9759c70ed582dfd77431ff7">   32</a></span>&#160;<span class="preprocessor">#define DATA_BUFFER_SIZE 2048</span></div>
<div class="line"><a name="l00033"></a><span class="lineno"><a class="code" href="memcached_8h.html#a05df0398f9b0815a685d15f36fa809c7">   33</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define UDP_READ_BUFFER_SIZE 65536</span></div>
<div class="line"><a name="l00034"></a><span class="lineno"><a class="code" href="memcached_8h.html#adeea76d049af191b881f2d58eca532ca">   34</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define UDP_MAX_PAYLOAD_SIZE 1400</span></div>
<div class="line"><a name="l00035"></a><span class="lineno"><a class="code" href="memcached_8h.html#a8a0fae83e487dc04b3cd774b3d4ee637">   35</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define UDP_HEADER_SIZE 8</span></div>
<div class="line"><a name="l00036"></a><span class="lineno"><a class="code" href="memcached_8h.html#a39626d37ee23d63b65a51cced19569af">   36</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define MAX_SENDBUF_SIZE (256 * 1024 * 1024)</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor"></span><span class="comment">/* I&#39;m told the max length of a 64-bit num converted to string is 20 bytes.</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment"> * Plus a few for spaces, \r\n, \0 */</span></div>
<div class="line"><a name="l00039"></a><span class="lineno"><a class="code" href="memcached_8h.html#ac11cfc1c764d31993bf747dcb16c45c5">   39</a></span>&#160;<span class="preprocessor">#define SUFFIX_SIZE 24</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="code" href="memcached_8h.html#a67fead4b33f125ae7873422d8d8dcdfb">   42</a></span>&#160;<span class="preprocessor">#define ITEM_LIST_INITIAL 200</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="code" href="memcached_8h.html#aad50a115f190cb796d5a25b910d62ac8">   45</a></span>&#160;<span class="preprocessor">#define SUFFIX_LIST_INITIAL 20</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="code" href="memcached_8h.html#a18ce3212ea76fbc1de1fe2d34f4b8c7e">   48</a></span>&#160;<span class="preprocessor">#define IOV_LIST_INITIAL 400</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="code" href="memcached_8h.html#a04e8d0719aba6a59ac6cb0b3ed202f95">   51</a></span>&#160;<span class="preprocessor">#define MSG_LIST_INITIAL 10</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="code" href="memcached_8h.html#a14d2f1d60a85984e1e0667cbefb620fc">   54</a></span>&#160;<span class="preprocessor">#define READ_BUFFER_HIGHWAT 8192</span></div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="code" href="memcached_8h.html#ad956eb982df5bd7acbda28c721b41eaa">   55</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define ITEM_LIST_HIGHWAT 400</span></div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="code" href="memcached_8h.html#acaa0d98800d7b0731fe95772fe298bd0">   56</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define IOV_LIST_HIGHWAT 600</span></div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="code" href="memcached_8h.html#a78cce1eb067f697c57755dee6475f59d">   57</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define MSG_LIST_HIGHWAT 100</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">/* Binary protocol stuff */</span></div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="code" href="memcached_8h.html#a811c6b700b56f87244029a6136cedf29">   60</a></span>&#160;<span class="preprocessor">#define MIN_BIN_PKT_LENGTH 16</span></div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="code" href="memcached_8h.html#a52e0174a1089d9beba9b4007b96fd647">   61</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define BIN_PKT_HDR_WORDS (MIN_BIN_PKT_LENGTH/sizeof(uint32_t))</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">/* Initial power multiplier for the hash table */</span></div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="code" href="memcached_8h.html#aeed3842d4e783549da57b74557b79fae">   64</a></span>&#160;<span class="preprocessor">#define HASHPOWER_DEFAULT 16</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">/* unistd.h is here */</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#if HAVE_UNISTD_H</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># include &lt;unistd.h&gt;</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">/* Slab sizing definitions. */</span></div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="code" href="memcached_8h.html#a3be25b5d15a433c400ec50d2c9d858b9">   72</a></span>&#160;<span class="preprocessor">#define POWER_SMALLEST 1</span></div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="code" href="memcached_8h.html#a0f6e848eba50c148da7a61eb94061c3c">   73</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define POWER_LARGEST  200</span></div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="code" href="memcached_8h.html#a8cd56df53d2341debe15fafe411515a6">   74</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define CHUNK_ALIGN_BYTES 8</span></div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="code" href="memcached_8h.html#ae8e332c92e566cf3b38a8a7e3d08eafe">   75</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define MAX_NUMBER_OF_SLAB_CLASSES (POWER_LARGEST + 1)</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="code" href="memcached_8h.html#a421b08fd9fc3d24db6d39014c02f66bb">   79</a></span>&#160;<span class="preprocessor">#define TAIL_REPAIR_TIME (3 * 3600)</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">/* warning: don&#39;t use these macros with a function, as it evals its arg twice */</span></div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="code" href="memcached_8h.html#ab8e3564ae343cbe6a61e7d277fe0d849">   82</a></span>&#160;<span class="preprocessor">#define ITEM_get_cas(i) (((i)-&gt;it_flags &amp; ITEM_CAS) ? \</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="preprocessor">        (i)-&gt;data-&gt;cas : (uint64_t)0)</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="code" href="memcached_8h.html#a906a01f2020378ebc543f3fac3a8de5c">   85</a></span>&#160;<span class="preprocessor">#define ITEM_set_cas(i,v) { \</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="preprocessor">    if ((i)-&gt;it_flags &amp; ITEM_CAS) { \</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="preprocessor">        (i)-&gt;data-&gt;cas = v; \</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="preprocessor">    } \</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="preprocessor">}</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="code" href="memcached_8h.html#a6f0bbc1b60dc6d44e4f33b7072c5c556">   91</a></span>&#160;<span class="preprocessor">#define ITEM_key(item) (((char*)&amp;((item)-&gt;data)) \</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="preprocessor">         + (((item)-&gt;it_flags &amp; ITEM_CAS) ? sizeof(uint64_t) : 0))</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="code" href="memcached_8h.html#acc9266e9b04daa12e359eb6d6f052fc3">   94</a></span>&#160;<span class="preprocessor">#define ITEM_suffix(item) ((char*) &amp;((item)-&gt;data) + (item)-&gt;nkey + 1 \</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="preprocessor">         + (((item)-&gt;it_flags &amp; ITEM_CAS) ? sizeof(uint64_t) : 0))</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="code" href="memcached_8h.html#a442889c7cb5c1ec39981f299331b4b29">   97</a></span>&#160;<span class="preprocessor">#define ITEM_data(item) ((char*) &amp;((item)-&gt;data) + (item)-&gt;nkey + 1 \</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="preprocessor">         + (item)-&gt;nsuffix \</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="preprocessor">         + (((item)-&gt;it_flags &amp; ITEM_CAS) ? sizeof(uint64_t) : 0))</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00101"></a><span class="lineno"><a class="code" href="memcached_8h.html#a5c9d5467cfb934e32d0794afc596fded">  101</a></span>&#160;<span class="preprocessor">#define ITEM_ntotal(item) (sizeof(struct _stritem) + (item)-&gt;nkey + 1 \</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="preprocessor">         + (item)-&gt;nsuffix + (item)-&gt;nbytes \</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="preprocessor">         + (((item)-&gt;it_flags &amp; ITEM_CAS) ? sizeof(uint64_t) : 0))</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00105"></a><span class="lineno"><a class="code" href="memcached_8h.html#a5e26c928bd042e89eb868edad98c6823">  105</a></span>&#160;<span class="preprocessor">#define STAT_KEY_LEN 128</span></div>
<div class="line"><a name="l00106"></a><span class="lineno"><a class="code" href="memcached_8h.html#af6b9c63c8a22b3d69ce019c26269847c">  106</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define STAT_VAL_LEN 128</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00109"></a><span class="lineno"><a class="code" href="memcached_8h.html#a76c2c7de1009374de65513d72f6e3e56">  109</a></span>&#160;<span class="preprocessor">#define APPEND_STAT(name, fmt, val) \</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="preprocessor">    append_stat(name, add_stats, c, fmt, val);</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00114"></a><span class="lineno"><a class="code" href="memcached_8h.html#a30ab71365faf0a05119b4705e26d81a8">  114</a></span>&#160;<span class="preprocessor">#define APPEND_NUM_FMT_STAT(name_fmt, num, name, fmt, val)          \</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="preprocessor">    klen = snprintf(key_str, STAT_KEY_LEN, name_fmt, num, name);    \</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="preprocessor">    vlen = snprintf(val_str, STAT_VAL_LEN, fmt, val);               \</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="preprocessor">    add_stats(key_str, klen, val_str, vlen, c);</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00120"></a><span class="lineno"><a class="code" href="memcached_8h.html#abe2689982c5b4d28c7eb6151710f404d">  120</a></span>&#160;<span class="preprocessor">#define APPEND_NUM_STAT(num, name, fmt, val) \</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="preprocessor">    APPEND_NUM_FMT_STAT(&quot;%d:%s&quot;, num, name, fmt, val)</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00132"></a><span class="lineno"><a class="code" href="memcached_8h.html#ab8d9bd9ba0b7b765633bf9b6cbd6aa30">  132</a></span>&#160;<span class="keyword">typedef</span> void (*<a class="code" href="memcached_8h.html#ab8d9bd9ba0b7b765633bf9b6cbd6aa30">ADD_STAT</a>)(<span class="keyword">const</span> <span class="keywordtype">char</span> *key, <span class="keyword">const</span> uint16_t klen,</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                         <span class="keyword">const</span> <span class="keywordtype">char</span> *val, <span class="keyword">const</span> uint32_t vlen,</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                         <span class="keyword">const</span> <span class="keywordtype">void</span> *cookie);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment"> * NOTE: If you modify this table you _MUST_ update the function state_text</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00142"></a><span class="lineno"><a class="code" href="memcached_8h.html#a397f77d103168a504b5fbc801538f2a7">  142</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="memcached_8h.html#a397f77d103168a504b5fbc801538f2a7">conn_states</a> {</div>
<div class="line"><a name="l00143"></a><span class="lineno"><a class="code" href="memcached_8h.html#a397f77d103168a504b5fbc801538f2a7ab8f6ee6d7c37cbcd7062290e7f737dfa">  143</a></span>&#160;    <a class="code" href="memcached_8h.html#a397f77d103168a504b5fbc801538f2a7ab8f6ee6d7c37cbcd7062290e7f737dfa">conn_listening</a>,  </div>
<div class="line"><a name="l00144"></a><span class="lineno"><a class="code" href="memcached_8h.html#a397f77d103168a504b5fbc801538f2a7a471b58ebc7dca71b12cff6fc620d70ef">  144</a></span>&#160;    <a class="code" href="memcached_8h.html#a397f77d103168a504b5fbc801538f2a7a471b58ebc7dca71b12cff6fc620d70ef">conn_new_cmd</a>,    </div>
<div class="line"><a name="l00145"></a><span class="lineno"><a class="code" href="memcached_8h.html#a397f77d103168a504b5fbc801538f2a7a45b0d57ee61815e8785958115727bcd6">  145</a></span>&#160;    <a class="code" href="memcached_8h.html#a397f77d103168a504b5fbc801538f2a7a45b0d57ee61815e8785958115727bcd6">conn_waiting</a>,    </div>
<div class="line"><a name="l00146"></a><span class="lineno"><a class="code" href="memcached_8h.html#a397f77d103168a504b5fbc801538f2a7a0fba4717ce3bd2ef568d54994adf8d39">  146</a></span>&#160;    <a class="code" href="memcached_8h.html#a397f77d103168a504b5fbc801538f2a7a0fba4717ce3bd2ef568d54994adf8d39">conn_read</a>,       </div>
<div class="line"><a name="l00147"></a><span class="lineno"><a class="code" href="memcached_8h.html#a397f77d103168a504b5fbc801538f2a7ad1037eff7d3fdbb41b18a4f2318c04e4">  147</a></span>&#160;    <a class="code" href="memcached_8h.html#a397f77d103168a504b5fbc801538f2a7ad1037eff7d3fdbb41b18a4f2318c04e4">conn_parse_cmd</a>,  </div>
<div class="line"><a name="l00148"></a><span class="lineno"><a class="code" href="memcached_8h.html#a397f77d103168a504b5fbc801538f2a7acbae1e2e254af99276db29687b1c1594">  148</a></span>&#160;    <a class="code" href="memcached_8h.html#a397f77d103168a504b5fbc801538f2a7acbae1e2e254af99276db29687b1c1594">conn_write</a>,      </div>
<div class="line"><a name="l00149"></a><span class="lineno"><a class="code" href="memcached_8h.html#a397f77d103168a504b5fbc801538f2a7a7bd90fbd58a0d585b4dbb133df716ba9">  149</a></span>&#160;    <a class="code" href="memcached_8h.html#a397f77d103168a504b5fbc801538f2a7a7bd90fbd58a0d585b4dbb133df716ba9">conn_nread</a>,      </div>
<div class="line"><a name="l00150"></a><span class="lineno"><a class="code" href="memcached_8h.html#a397f77d103168a504b5fbc801538f2a7a7f3423d135032e6efd97a54256e0d990">  150</a></span>&#160;    <a class="code" href="memcached_8h.html#a397f77d103168a504b5fbc801538f2a7a7f3423d135032e6efd97a54256e0d990">conn_swallow</a>,    </div>
<div class="line"><a name="l00151"></a><span class="lineno"><a class="code" href="memcached_8h.html#a397f77d103168a504b5fbc801538f2a7abaf6f3e6a12460ae0b11c5dc984def13">  151</a></span>&#160;    <a class="code" href="memcached_8h.html#a397f77d103168a504b5fbc801538f2a7abaf6f3e6a12460ae0b11c5dc984def13">conn_closing</a>,    </div>
<div class="line"><a name="l00152"></a><span class="lineno"><a class="code" href="memcached_8h.html#a397f77d103168a504b5fbc801538f2a7a4cc089a47b08dead789981192fb85bca">  152</a></span>&#160;    <a class="code" href="memcached_8h.html#a397f77d103168a504b5fbc801538f2a7a4cc089a47b08dead789981192fb85bca">conn_mwrite</a>,     </div>
<div class="line"><a name="l00153"></a><span class="lineno"><a class="code" href="memcached_8h.html#a397f77d103168a504b5fbc801538f2a7aca81038536eb0d4020afb6ef63c1d21d">  153</a></span>&#160;    <a class="code" href="memcached_8h.html#a397f77d103168a504b5fbc801538f2a7aca81038536eb0d4020afb6ef63c1d21d">conn_max_state</a>   </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;};</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div>
<div class="line"><a name="l00156"></a><span class="lineno"><a class="code" href="memcached_8h.html#ae281f6c321ed03cfb642a50e205177c7">  156</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="memcached_8h.html#ae281f6c321ed03cfb642a50e205177c7">bin_substates</a> {</div>
<div class="line"><a name="l00157"></a><span class="lineno"><a class="code" href="memcached_8h.html#ae281f6c321ed03cfb642a50e205177c7acef6c433a3f788f6496712ff3863ed81">  157</a></span>&#160;    <a class="code" href="memcached_8h.html#ae281f6c321ed03cfb642a50e205177c7acef6c433a3f788f6496712ff3863ed81">bin_no_state</a>,</div>
<div class="line"><a name="l00158"></a><span class="lineno"><a class="code" href="memcached_8h.html#ae281f6c321ed03cfb642a50e205177c7a9ab816e3175ec539a708893697ccb9d8">  158</a></span>&#160;    <a class="code" href="memcached_8h.html#ae281f6c321ed03cfb642a50e205177c7a9ab816e3175ec539a708893697ccb9d8">bin_reading_set_header</a>,</div>
<div class="line"><a name="l00159"></a><span class="lineno"><a class="code" href="memcached_8h.html#ae281f6c321ed03cfb642a50e205177c7a3e3d8313972488ac21259efabdc55e6b">  159</a></span>&#160;    <a class="code" href="memcached_8h.html#ae281f6c321ed03cfb642a50e205177c7a3e3d8313972488ac21259efabdc55e6b">bin_reading_cas_header</a>,</div>
<div class="line"><a name="l00160"></a><span class="lineno"><a class="code" href="memcached_8h.html#ae281f6c321ed03cfb642a50e205177c7ad06ff8b91c2992cc00a729781a27a60b">  160</a></span>&#160;    <a class="code" href="memcached_8h.html#ae281f6c321ed03cfb642a50e205177c7ad06ff8b91c2992cc00a729781a27a60b">bin_read_set_value</a>,</div>
<div class="line"><a name="l00161"></a><span class="lineno"><a class="code" href="memcached_8h.html#ae281f6c321ed03cfb642a50e205177c7a1475f54a5df58e452a485e0fdece93dc">  161</a></span>&#160;    <a class="code" href="memcached_8h.html#ae281f6c321ed03cfb642a50e205177c7a1475f54a5df58e452a485e0fdece93dc">bin_reading_get_key</a>,</div>
<div class="line"><a name="l00162"></a><span class="lineno"><a class="code" href="memcached_8h.html#ae281f6c321ed03cfb642a50e205177c7ae16889ae613bfb54c7b620a8ffc4155b">  162</a></span>&#160;    <a class="code" href="memcached_8h.html#ae281f6c321ed03cfb642a50e205177c7ae16889ae613bfb54c7b620a8ffc4155b">bin_reading_stat</a>,</div>
<div class="line"><a name="l00163"></a><span class="lineno"><a class="code" href="memcached_8h.html#ae281f6c321ed03cfb642a50e205177c7aed8eb46134a61812268a752a532686d7">  163</a></span>&#160;    <a class="code" href="memcached_8h.html#ae281f6c321ed03cfb642a50e205177c7aed8eb46134a61812268a752a532686d7">bin_reading_del_header</a>,</div>
<div class="line"><a name="l00164"></a><span class="lineno"><a class="code" href="memcached_8h.html#ae281f6c321ed03cfb642a50e205177c7a11010d81960b20927d416a9ff93400d2">  164</a></span>&#160;    <a class="code" href="memcached_8h.html#ae281f6c321ed03cfb642a50e205177c7a11010d81960b20927d416a9ff93400d2">bin_reading_incr_header</a>,</div>
<div class="line"><a name="l00165"></a><span class="lineno"><a class="code" href="memcached_8h.html#ae281f6c321ed03cfb642a50e205177c7aa4f0970d48aa5e8389a987a590f51fd1">  165</a></span>&#160;    <a class="code" href="memcached_8h.html#ae281f6c321ed03cfb642a50e205177c7aa4f0970d48aa5e8389a987a590f51fd1">bin_read_flush_exptime</a>,</div>
<div class="line"><a name="l00166"></a><span class="lineno"><a class="code" href="memcached_8h.html#ae281f6c321ed03cfb642a50e205177c7aca3e57e5c7159defb9fda4d896643fe8">  166</a></span>&#160;    <a class="code" href="memcached_8h.html#ae281f6c321ed03cfb642a50e205177c7aca3e57e5c7159defb9fda4d896643fe8">bin_reading_sasl_auth</a>,</div>
<div class="line"><a name="l00167"></a><span class="lineno"><a class="code" href="memcached_8h.html#ae281f6c321ed03cfb642a50e205177c7aa2a3545382b1066cfd36172f92bbeeaf">  167</a></span>&#160;    <a class="code" href="memcached_8h.html#ae281f6c321ed03cfb642a50e205177c7aa2a3545382b1066cfd36172f92bbeeaf">bin_reading_sasl_auth_data</a>,</div>
<div class="line"><a name="l00168"></a><span class="lineno"><a class="code" href="memcached_8h.html#ae281f6c321ed03cfb642a50e205177c7a10e11a2518b01638982257dbed600704">  168</a></span>&#160;    <a class="code" href="memcached_8h.html#ae281f6c321ed03cfb642a50e205177c7a10e11a2518b01638982257dbed600704">bin_reading_touch_key</a>,</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;};</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div>
<div class="line"><a name="l00171"></a><span class="lineno"><a class="code" href="memcached_8h.html#add2ec924c0f221790d7235ffb2e615cd">  171</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="memcached_8h.html#add2ec924c0f221790d7235ffb2e615cd">protocol</a> {</div>
<div class="line"><a name="l00172"></a><span class="lineno"><a class="code" href="memcached_8h.html#add2ec924c0f221790d7235ffb2e615cda4ea4e26ca73d727186948986255b7ee1">  172</a></span>&#160;    <a class="code" href="memcached_8h.html#add2ec924c0f221790d7235ffb2e615cda4ea4e26ca73d727186948986255b7ee1">ascii_prot</a> = 3, <span class="comment">/* arbitrary value. */</span></div>
<div class="line"><a name="l00173"></a><span class="lineno"><a class="code" href="memcached_8h.html#add2ec924c0f221790d7235ffb2e615cdaa690b1bac2d1cb639ad1cae78b34e00a">  173</a></span>&#160;    <a class="code" href="memcached_8h.html#add2ec924c0f221790d7235ffb2e615cdaa690b1bac2d1cb639ad1cae78b34e00a">binary_prot</a>,</div>
<div class="line"><a name="l00174"></a><span class="lineno"><a class="code" href="memcached_8h.html#add2ec924c0f221790d7235ffb2e615cdaf80e49eae5478cb0ec774eb4c6f691e5">  174</a></span>&#160;    <a class="code" href="memcached_8h.html#add2ec924c0f221790d7235ffb2e615cdaf80e49eae5478cb0ec774eb4c6f691e5">negotiating_prot</a> <span class="comment">/* Discovering the protocol */</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;};</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div>
<div class="line"><a name="l00177"></a><span class="lineno"><a class="code" href="memcached_8h.html#ab2a402bae66e9d81d0928284b707a47c">  177</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="memcached_8h.html#ab2a402bae66e9d81d0928284b707a47c">network_transport</a> {</div>
<div class="line"><a name="l00178"></a><span class="lineno"><a class="code" href="memcached_8h.html#ab2a402bae66e9d81d0928284b707a47cafe899b14f238e2c497477a776cc5f69e">  178</a></span>&#160;    <a class="code" href="memcached_8h.html#ab2a402bae66e9d81d0928284b707a47cafe899b14f238e2c497477a776cc5f69e">local_transport</a>, <span class="comment">/* Unix sockets*/</span></div>
<div class="line"><a name="l00179"></a><span class="lineno"><a class="code" href="memcached_8h.html#ab2a402bae66e9d81d0928284b707a47ca81139c0ad71aee7ae9cc39e82c1cfa75">  179</a></span>&#160;    <a class="code" href="memcached_8h.html#ab2a402bae66e9d81d0928284b707a47ca81139c0ad71aee7ae9cc39e82c1cfa75">tcp_transport</a>,</div>
<div class="line"><a name="l00180"></a><span class="lineno"><a class="code" href="memcached_8h.html#ab2a402bae66e9d81d0928284b707a47ca02460ebdb794029487d92354e57030aa">  180</a></span>&#160;    <a class="code" href="memcached_8h.html#ab2a402bae66e9d81d0928284b707a47ca02460ebdb794029487d92354e57030aa">udp_transport</a></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;};</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div>
<div class="line"><a name="l00183"></a><span class="lineno"><a class="code" href="memcached_8h.html#a31ef3b9551fcd1f3706021a01a8c6943">  183</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="memcached_8h.html#a31ef3b9551fcd1f3706021a01a8c6943">item_lock_types</a> {</div>
<div class="line"><a name="l00184"></a><span class="lineno"><a class="code" href="memcached_8h.html#a31ef3b9551fcd1f3706021a01a8c6943a956f86c242d22a272ef53d4d4c73eb55">  184</a></span>&#160;    <a class="code" href="memcached_8h.html#a31ef3b9551fcd1f3706021a01a8c6943a956f86c242d22a272ef53d4d4c73eb55">ITEM_LOCK_GRANULAR</a> = 0,</div>
<div class="line"><a name="l00185"></a><span class="lineno"><a class="code" href="memcached_8h.html#a31ef3b9551fcd1f3706021a01a8c6943a2531972a4b6f2a502b1203b8a4115879">  185</a></span>&#160;    <a class="code" href="memcached_8h.html#a31ef3b9551fcd1f3706021a01a8c6943a2531972a4b6f2a502b1203b8a4115879">ITEM_LOCK_GLOBAL</a></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;};</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div>
<div class="line"><a name="l00188"></a><span class="lineno"><a class="code" href="memcached_8h.html#ae7d628501377024bde05056f4af112bb">  188</a></span>&#160;<span class="preprocessor">#define IS_UDP(x) (x == udp_transport)</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00190"></a><span class="lineno"><a class="code" href="memcached_8h.html#a2beaf4cbf661902595987c951dca81b5">  190</a></span>&#160;<span class="preprocessor">#define NREAD_ADD 1</span></div>
<div class="line"><a name="l00191"></a><span class="lineno"><a class="code" href="memcached_8h.html#afbe0384d1c4c682750a250c53a4360b6">  191</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define NREAD_SET 2</span></div>
<div class="line"><a name="l00192"></a><span class="lineno"><a class="code" href="memcached_8h.html#acf25e0ecbffb495dfedf760dde07d729">  192</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define NREAD_REPLACE 3</span></div>
<div class="line"><a name="l00193"></a><span class="lineno"><a class="code" href="memcached_8h.html#aceae72061dd3619d8fb95e33bae0b8e8">  193</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define NREAD_APPEND 4</span></div>
<div class="line"><a name="l00194"></a><span class="lineno"><a class="code" href="memcached_8h.html#afbaf99dc7e4b0e86f91e8e44da33a5c1">  194</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define NREAD_PREPEND 5</span></div>
<div class="line"><a name="l00195"></a><span class="lineno"><a class="code" href="memcached_8h.html#aefa2deecfd52be7f36ed92e857a5a134">  195</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define NREAD_CAS 6</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00197"></a><span class="lineno"><a class="code" href="memcached_8h.html#a1cf8921762294d73fe28150b7fa2a18e">  197</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="memcached_8h.html#a1cf8921762294d73fe28150b7fa2a18e">store_item_type</a> {</div>
<div class="line"><a name="l00198"></a><span class="lineno"><a class="code" href="memcached_8h.html#a1cf8921762294d73fe28150b7fa2a18ea77647f28a49007bb2c1f10fa36f33b55">  198</a></span>&#160;    <a class="code" href="memcached_8h.html#a1cf8921762294d73fe28150b7fa2a18eaf7ef7e30a1b86cc3ffae6fa876110d66">NOT_STORED</a>=0, <a class="code" href="memcached_8h.html#a1cf8921762294d73fe28150b7fa2a18ea77647f28a49007bb2c1f10fa36f33b55">STORED</a>, <a class="code" href="memcached_8h.html#a1cf8921762294d73fe28150b7fa2a18ea3197625a1bb2264943f5a95f236d9973">EXISTS</a>, <a class="code" href="memcached_8h.html#a1cf8921762294d73fe28150b7fa2a18eacdaa2919bac56fe1090eb3dbb9526472">NOT_FOUND</a></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;};</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div>
<div class="line"><a name="l00201"></a><span class="lineno"><a class="code" href="memcached_8h.html#ac1341dff6a89ead35b6c23f93cd3afb6">  201</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="memcached_8h.html#ac1341dff6a89ead35b6c23f93cd3afb6">delta_result_type</a> {</div>
<div class="line"><a name="l00202"></a><span class="lineno"><a class="code" href="memcached_8h.html#ac1341dff6a89ead35b6c23f93cd3afb6a2bc49ec37d6a5715dd23e85f1ff5bb59">  202</a></span>&#160;    <a class="code" href="memcached_8h.html#ac1341dff6a89ead35b6c23f93cd3afb6a2bc49ec37d6a5715dd23e85f1ff5bb59">OK</a>, <a class="code" href="memcached_8h.html#ac1341dff6a89ead35b6c23f93cd3afb6aa0e85086ea6e007b7fcfc2066a6a80f2">NON_NUMERIC</a>, <a class="code" href="memcached_8h.html#ac1341dff6a89ead35b6c23f93cd3afb6a1b4a561e20ef7dd15410664536e0969f">EOM</a>, <a class="code" href="memcached_8h.html#ac1341dff6a89ead35b6c23f93cd3afb6a184fa598f80042fbe89466df79cd5d6c">DELTA_ITEM_NOT_FOUND</a>, <a class="code" href="memcached_8h.html#ac1341dff6a89ead35b6c23f93cd3afb6a95239f966539444d2ed49dcbcc65b3f2">DELTA_ITEM_CAS_MISMATCH</a></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;};</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div>
<div class="line"><a name="l00206"></a><span class="lineno"><a class="code" href="memcached_8h.html#a602ccc3d124c1c56b6afe0ae93e04bc4">  206</a></span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="memcached_8h.html#a602ccc3d124c1c56b6afe0ae93e04bc4">rel_time_t</a>;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div>
<div class="line"><a name="l00209"></a><span class="lineno"><a class="code" href="structslab__stats.html">  209</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structslab__stats.html">slab_stats</a> {</div>
<div class="line"><a name="l00210"></a><span class="lineno"><a class="code" href="structslab__stats.html#a4da67cc4f2297d79e69e3805f42c90b7">  210</a></span>&#160;    uint64_t  <a class="code" href="structslab__stats.html#a4da67cc4f2297d79e69e3805f42c90b7">set_cmds</a>;</div>
<div class="line"><a name="l00211"></a><span class="lineno"><a class="code" href="structslab__stats.html#a7bc073fa35375d23129eab883ff2b633">  211</a></span>&#160;    uint64_t  <a class="code" href="structslab__stats.html#a7bc073fa35375d23129eab883ff2b633">get_hits</a>;</div>
<div class="line"><a name="l00212"></a><span class="lineno"><a class="code" href="structslab__stats.html#a03d5245cef2f8135920e2b2b845aa90f">  212</a></span>&#160;    uint64_t  <a class="code" href="structslab__stats.html#a03d5245cef2f8135920e2b2b845aa90f">touch_hits</a>;</div>
<div class="line"><a name="l00213"></a><span class="lineno"><a class="code" href="structslab__stats.html#a269423b43063e97b7ecdd16347f38cb4">  213</a></span>&#160;    uint64_t  <a class="code" href="structslab__stats.html#a269423b43063e97b7ecdd16347f38cb4">delete_hits</a>;</div>
<div class="line"><a name="l00214"></a><span class="lineno"><a class="code" href="structslab__stats.html#a391924745fcae79874c492f9db29f6e5">  214</a></span>&#160;    uint64_t  <a class="code" href="structslab__stats.html#a391924745fcae79874c492f9db29f6e5">cas_hits</a>;</div>
<div class="line"><a name="l00215"></a><span class="lineno"><a class="code" href="structslab__stats.html#af7dc635cd3086d46d93cfd44e3a6c3e7">  215</a></span>&#160;    uint64_t  <a class="code" href="structslab__stats.html#af7dc635cd3086d46d93cfd44e3a6c3e7">cas_badval</a>;</div>
<div class="line"><a name="l00216"></a><span class="lineno"><a class="code" href="structslab__stats.html#aa184357792689748e228095f17f9e83c">  216</a></span>&#160;    uint64_t  <a class="code" href="structslab__stats.html#aa184357792689748e228095f17f9e83c">incr_hits</a>;</div>
<div class="line"><a name="l00217"></a><span class="lineno"><a class="code" href="structslab__stats.html#a08355226ee7038716958682338fdbdda">  217</a></span>&#160;    uint64_t  <a class="code" href="structslab__stats.html#a08355226ee7038716958682338fdbdda">decr_hits</a>;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;};</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div>
<div class="line"><a name="l00223"></a><span class="lineno"><a class="code" href="structthread__stats.html">  223</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structthread__stats.html">thread_stats</a> {</div>
<div class="line"><a name="l00224"></a><span class="lineno"><a class="code" href="structthread__stats.html#a656e2f3c52c764e6bbba2c8de29ae812">  224</a></span>&#160;    pthread_mutex_t   <a class="code" href="structthread__stats.html#a656e2f3c52c764e6bbba2c8de29ae812">mutex</a>;</div>
<div class="line"><a name="l00225"></a><span class="lineno"><a class="code" href="structthread__stats.html#affa01fa8b4974f4839122424c1bb2fc3">  225</a></span>&#160;    uint64_t          <a class="code" href="structthread__stats.html#affa01fa8b4974f4839122424c1bb2fc3">get_cmds</a>;</div>
<div class="line"><a name="l00226"></a><span class="lineno"><a class="code" href="structthread__stats.html#acc592fd8da9cdd9a227c59f8ba346fb5">  226</a></span>&#160;    uint64_t          <a class="code" href="structthread__stats.html#acc592fd8da9cdd9a227c59f8ba346fb5">get_misses</a>;</div>
<div class="line"><a name="l00227"></a><span class="lineno"><a class="code" href="structthread__stats.html#a21f329f55efc46e11ff85ea3ede34565">  227</a></span>&#160;    uint64_t          <a class="code" href="structthread__stats.html#a21f329f55efc46e11ff85ea3ede34565">touch_cmds</a>;</div>
<div class="line"><a name="l00228"></a><span class="lineno"><a class="code" href="structthread__stats.html#a34cbf0035de0f5bd78e8ed70947ca0a7">  228</a></span>&#160;    uint64_t          <a class="code" href="structthread__stats.html#a34cbf0035de0f5bd78e8ed70947ca0a7">touch_misses</a>;</div>
<div class="line"><a name="l00229"></a><span class="lineno"><a class="code" href="structthread__stats.html#aeb08e5cab194e1337007464c42fbbbdf">  229</a></span>&#160;    uint64_t          <a class="code" href="structthread__stats.html#aeb08e5cab194e1337007464c42fbbbdf">delete_misses</a>;</div>
<div class="line"><a name="l00230"></a><span class="lineno"><a class="code" href="structthread__stats.html#a9d783773df9a1163f1475fe10e4d2838">  230</a></span>&#160;    uint64_t          <a class="code" href="structthread__stats.html#a9d783773df9a1163f1475fe10e4d2838">incr_misses</a>;</div>
<div class="line"><a name="l00231"></a><span class="lineno"><a class="code" href="structthread__stats.html#af5376d1206b9e71cbff2dab81e930d28">  231</a></span>&#160;    uint64_t          <a class="code" href="structthread__stats.html#af5376d1206b9e71cbff2dab81e930d28">decr_misses</a>;</div>
<div class="line"><a name="l00232"></a><span class="lineno"><a class="code" href="structthread__stats.html#adaaed26081651c8236b1cc5b4f4748ec">  232</a></span>&#160;    uint64_t          <a class="code" href="structthread__stats.html#adaaed26081651c8236b1cc5b4f4748ec">cas_misses</a>;</div>
<div class="line"><a name="l00233"></a><span class="lineno"><a class="code" href="structthread__stats.html#a78b389a507be8c78d2757b79c6b2069d">  233</a></span>&#160;    uint64_t          <a class="code" href="structthread__stats.html#a78b389a507be8c78d2757b79c6b2069d">bytes_read</a>;</div>
<div class="line"><a name="l00234"></a><span class="lineno"><a class="code" href="structthread__stats.html#afff437fd1fcac940ffd2fa44d3182838">  234</a></span>&#160;    uint64_t          <a class="code" href="structthread__stats.html#afff437fd1fcac940ffd2fa44d3182838">bytes_written</a>;</div>
<div class="line"><a name="l00235"></a><span class="lineno"><a class="code" href="structthread__stats.html#a8f4915ca2892f21641a126951660b625">  235</a></span>&#160;    uint64_t          <a class="code" href="structthread__stats.html#a8f4915ca2892f21641a126951660b625">flush_cmds</a>;</div>
<div class="line"><a name="l00236"></a><span class="lineno"><a class="code" href="structthread__stats.html#a77b7ea5473695cd12f7c41d1a7e812b8">  236</a></span>&#160;    uint64_t          <a class="code" href="structthread__stats.html#a77b7ea5473695cd12f7c41d1a7e812b8">conn_yields</a>; <span class="comment">/* # of yields for connections (-R option)*/</span></div>
<div class="line"><a name="l00237"></a><span class="lineno"><a class="code" href="structthread__stats.html#acfe9dab457819ed2745f21297284ddbc">  237</a></span>&#160;    uint64_t          <a class="code" href="structthread__stats.html#acfe9dab457819ed2745f21297284ddbc">auth_cmds</a>;</div>
<div class="line"><a name="l00238"></a><span class="lineno"><a class="code" href="structthread__stats.html#ada41112ec5c0cdc92555fd44a4bfbad3">  238</a></span>&#160;    uint64_t          <a class="code" href="structthread__stats.html#ada41112ec5c0cdc92555fd44a4bfbad3">auth_errors</a>;</div>
<div class="line"><a name="l00239"></a><span class="lineno"><a class="code" href="structthread__stats.html#aefc242998efe6318a32510565acbcb01">  239</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structslab__stats.html">slab_stats</a> <a class="code" href="structslab__stats.html">slab_stats</a>[<a class="code" href="memcached_8h.html#ae8e332c92e566cf3b38a8a7e3d08eafe">MAX_NUMBER_OF_SLAB_CLASSES</a>];</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;};</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div>
<div class="line"><a name="l00245"></a><span class="lineno"><a class="code" href="structstats.html">  245</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structstats.html">stats</a> {</div>
<div class="line"><a name="l00246"></a><span class="lineno"><a class="code" href="structstats.html#aa1da24a4ab04ced93a99433d2914ed96">  246</a></span>&#160;    pthread_mutex_t <a class="code" href="structstats.html#aa1da24a4ab04ced93a99433d2914ed96">mutex</a>;</div>
<div class="line"><a name="l00247"></a><span class="lineno"><a class="code" href="structstats.html#a7e27973d723b2bb83265f1324b6265d5">  247</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>  <a class="code" href="structstats.html#a7e27973d723b2bb83265f1324b6265d5">curr_items</a>;</div>
<div class="line"><a name="l00248"></a><span class="lineno"><a class="code" href="structstats.html#af4feaf763564d06ef80569941f31b641">  248</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>  <a class="code" href="structstats.html#af4feaf763564d06ef80569941f31b641">total_items</a>;</div>
<div class="line"><a name="l00249"></a><span class="lineno"><a class="code" href="structstats.html#a16d174f23f4b8e48c3dc2557f2db7750">  249</a></span>&#160;    uint64_t      <a class="code" href="structstats.html#a16d174f23f4b8e48c3dc2557f2db7750">curr_bytes</a>;</div>
<div class="line"><a name="l00250"></a><span class="lineno"><a class="code" href="structstats.html#a1c0edacbfc2610977c9d1c6a675be6bb">  250</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>  <a class="code" href="structstats.html#a1c0edacbfc2610977c9d1c6a675be6bb">curr_conns</a>;</div>
<div class="line"><a name="l00251"></a><span class="lineno"><a class="code" href="structstats.html#a4b4ee0d2ac0f6c34246f459cb9af20cd">  251</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>  <a class="code" href="structstats.html#a4b4ee0d2ac0f6c34246f459cb9af20cd">total_conns</a>;</div>
<div class="line"><a name="l00252"></a><span class="lineno"><a class="code" href="structstats.html#aa10873572e850c5a05a8d8bd47937b9b">  252</a></span>&#160;    uint64_t      <a class="code" href="structstats.html#aa10873572e850c5a05a8d8bd47937b9b">rejected_conns</a>;</div>
<div class="line"><a name="l00253"></a><span class="lineno"><a class="code" href="structstats.html#abc27ddf1fc4db68fcdadcd251bbea45d">  253</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>  <a class="code" href="structstats.html#abc27ddf1fc4db68fcdadcd251bbea45d">reserved_fds</a>;</div>
<div class="line"><a name="l00254"></a><span class="lineno"><a class="code" href="structstats.html#a444566021e240f7552b946e7516d6ebe">  254</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>  <a class="code" href="structstats.html#a444566021e240f7552b946e7516d6ebe">conn_structs</a>;</div>
<div class="line"><a name="l00255"></a><span class="lineno"><a class="code" href="structstats.html#a990bacf5404f31f17a6dafc465a2b775">  255</a></span>&#160;    uint64_t      <a class="code" href="structstats.html#a990bacf5404f31f17a6dafc465a2b775">get_cmds</a>;</div>
<div class="line"><a name="l00256"></a><span class="lineno"><a class="code" href="structstats.html#a53ccb9f0a724b936ad00f9af020dd6a0">  256</a></span>&#160;    uint64_t      <a class="code" href="structstats.html#a53ccb9f0a724b936ad00f9af020dd6a0">set_cmds</a>;</div>
<div class="line"><a name="l00257"></a><span class="lineno"><a class="code" href="structstats.html#a2dddf183c76f618029ac2ba49b5c5f39">  257</a></span>&#160;    uint64_t      <a class="code" href="structstats.html#a2dddf183c76f618029ac2ba49b5c5f39">touch_cmds</a>;</div>
<div class="line"><a name="l00258"></a><span class="lineno"><a class="code" href="structstats.html#a12c881743d5b3afd0a4ab18b29a413c9">  258</a></span>&#160;    uint64_t      <a class="code" href="structstats.html#a12c881743d5b3afd0a4ab18b29a413c9">get_hits</a>;</div>
<div class="line"><a name="l00259"></a><span class="lineno"><a class="code" href="structstats.html#a1802ea50eb0aab84ab3e923dd53d294e">  259</a></span>&#160;    uint64_t      <a class="code" href="structstats.html#a1802ea50eb0aab84ab3e923dd53d294e">get_misses</a>;</div>
<div class="line"><a name="l00260"></a><span class="lineno"><a class="code" href="structstats.html#a544b62a0157e4249b499214800d6b75d">  260</a></span>&#160;    uint64_t      <a class="code" href="structstats.html#a544b62a0157e4249b499214800d6b75d">touch_hits</a>;</div>
<div class="line"><a name="l00261"></a><span class="lineno"><a class="code" href="structstats.html#a3eaf47f9effcfe6eb77a2259bf1c1464">  261</a></span>&#160;    uint64_t      <a class="code" href="structstats.html#a3eaf47f9effcfe6eb77a2259bf1c1464">touch_misses</a>;</div>
<div class="line"><a name="l00262"></a><span class="lineno"><a class="code" href="structstats.html#acecd3ccfa807a4fb7deb5be5e174a6fc">  262</a></span>&#160;    uint64_t      <a class="code" href="structstats.html#acecd3ccfa807a4fb7deb5be5e174a6fc">evictions</a>;</div>
<div class="line"><a name="l00263"></a><span class="lineno"><a class="code" href="structstats.html#afd47c8470c28262193967997c271e476">  263</a></span>&#160;    uint64_t      <a class="code" href="structstats.html#afd47c8470c28262193967997c271e476">reclaimed</a>;</div>
<div class="line"><a name="l00264"></a><span class="lineno"><a class="code" href="structstats.html#abaf2f10d93dcc5aef7c8ca46c3c52e0b">  264</a></span>&#160;    time_t        <a class="code" href="structstats.html#abaf2f10d93dcc5aef7c8ca46c3c52e0b">started</a>;          <span class="comment">/* when the process was started */</span></div>
<div class="line"><a name="l00265"></a><span class="lineno"><a class="code" href="structstats.html#aed0a44d59a6fc1d01dca4639414905a0">  265</a></span>&#160;    <span class="keywordtype">bool</span>          <a class="code" href="structstats.html#aed0a44d59a6fc1d01dca4639414905a0">accepting_conns</a>;  <span class="comment">/* whether we are currently accepting */</span></div>
<div class="line"><a name="l00266"></a><span class="lineno"><a class="code" href="structstats.html#a7cce50f30bfeebca79e4fb3c36def765">  266</a></span>&#160;    uint64_t      <a class="code" href="structstats.html#a7cce50f30bfeebca79e4fb3c36def765">listen_disabled_num</a>;</div>
<div class="line"><a name="l00267"></a><span class="lineno"><a class="code" href="structstats.html#ac95007d348ef913f21ba6a3076c574bd">  267</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>  <a class="code" href="structstats.html#ac95007d348ef913f21ba6a3076c574bd">hash_power_level</a>; <span class="comment">/* Better hope it&#39;s not over 9000 */</span></div>
<div class="line"><a name="l00268"></a><span class="lineno"><a class="code" href="structstats.html#a24f1a23138153c30029984ea1ae83e03">  268</a></span>&#160;    uint64_t      <a class="code" href="structstats.html#a24f1a23138153c30029984ea1ae83e03">hash_bytes</a>;       <span class="comment">/* size used for hash tables */</span></div>
<div class="line"><a name="l00269"></a><span class="lineno"><a class="code" href="structstats.html#aa1ec8335e83eef5217d8f746652780d3">  269</a></span>&#160;    <span class="keywordtype">bool</span>          <a class="code" href="structstats.html#aa1ec8335e83eef5217d8f746652780d3">hash_is_expanding</a>; <span class="comment">/* If the hash table is being expanded */</span></div>
<div class="line"><a name="l00270"></a><span class="lineno"><a class="code" href="structstats.html#a08883f033d8141da5bfbf5c35413726d">  270</a></span>&#160;    uint64_t      <a class="code" href="structstats.html#a08883f033d8141da5bfbf5c35413726d">expired_unfetched</a>; <span class="comment">/* items reclaimed but never touched */</span></div>
<div class="line"><a name="l00271"></a><span class="lineno"><a class="code" href="structstats.html#a2004ef626d34968577433c00a3f93f25">  271</a></span>&#160;    uint64_t      <a class="code" href="structstats.html#a2004ef626d34968577433c00a3f93f25">evicted_unfetched</a>; <span class="comment">/* items evicted but never touched */</span></div>
<div class="line"><a name="l00272"></a><span class="lineno"><a class="code" href="structstats.html#a2f0a40f83bd87dbebfb15087ed4f808a">  272</a></span>&#160;    <span class="keywordtype">bool</span>          <a class="code" href="structstats.html#a2f0a40f83bd87dbebfb15087ed4f808a">slab_reassign_running</a>; <span class="comment">/* slab reassign in progress */</span></div>
<div class="line"><a name="l00273"></a><span class="lineno"><a class="code" href="structstats.html#ab8d7698a1ee210809aa27e32542d52a6">  273</a></span>&#160;    uint64_t      <a class="code" href="structstats.html#ab8d7698a1ee210809aa27e32542d52a6">slabs_moved</a>;       <span class="comment">/* times slabs were moved around */</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;};</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div>
<div class="line"><a name="l00276"></a><span class="lineno"><a class="code" href="memcached_8h.html#a6d56e2cd35fd2a8391a19abba528f353">  276</a></span>&#160;<span class="preprocessor">#define MAX_VERBOSITY_LEVEL 2</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment">/* When adding a setting, be sure to update process_stat_settings */</span></div>
<div class="line"><a name="l00282"></a><span class="lineno"><a class="code" href="structsettings.html">  282</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structsettings.html">settings</a> {</div>
<div class="line"><a name="l00283"></a><span class="lineno"><a class="code" href="structsettings.html#a9e462ca2f9a0531d782cd24f2e51354f">  283</a></span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="structsettings.html#a9e462ca2f9a0531d782cd24f2e51354f">maxbytes</a>;</div>
<div class="line"><a name="l00284"></a><span class="lineno"><a class="code" href="structsettings.html#a661321f255edb678a4b8a52e909b4acf">  284</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structsettings.html#a661321f255edb678a4b8a52e909b4acf">maxconns</a>;</div>
<div class="line"><a name="l00285"></a><span class="lineno"><a class="code" href="structsettings.html#a20fa1e33e54d255f4f5e3df2da3e64ef">  285</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structsettings.html#a20fa1e33e54d255f4f5e3df2da3e64ef">port</a>;</div>
<div class="line"><a name="l00286"></a><span class="lineno"><a class="code" href="structsettings.html#a1a574901d729a109bd3156885c96e37e">  286</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structsettings.html#a1a574901d729a109bd3156885c96e37e">udpport</a>;</div>
<div class="line"><a name="l00287"></a><span class="lineno"><a class="code" href="structsettings.html#a3077457f2ff945dbc779ec42c44dfb08">  287</a></span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="structsettings.html#a3077457f2ff945dbc779ec42c44dfb08">inter</a>;</div>
<div class="line"><a name="l00288"></a><span class="lineno"><a class="code" href="structsettings.html#a8cfab16abb0cfc28ce1244c48bacdb6e">  288</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structsettings.html#a8cfab16abb0cfc28ce1244c48bacdb6e">verbose</a>;</div>
<div class="line"><a name="l00289"></a><span class="lineno"><a class="code" href="structsettings.html#adf482d13739658b54ac96c6eadba8bc6">  289</a></span>&#160;    <a class="code" href="memcached_8h.html#a602ccc3d124c1c56b6afe0ae93e04bc4">rel_time_t</a> <a class="code" href="structsettings.html#adf482d13739658b54ac96c6eadba8bc6">oldest_live</a>; <span class="comment">/* ignore existing items older than this */</span></div>
<div class="line"><a name="l00290"></a><span class="lineno"><a class="code" href="structsettings.html#ad168c4ce8bca42ce8f7b0ba8b66fba1a">  290</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structsettings.html#ad168c4ce8bca42ce8f7b0ba8b66fba1a">evict_to_free</a>;</div>
<div class="line"><a name="l00291"></a><span class="lineno"><a class="code" href="structsettings.html#a4c283e7be93d2eb0e7af366abc360ba7">  291</a></span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="structsettings.html#a4c283e7be93d2eb0e7af366abc360ba7">socketpath</a>;   <span class="comment">/* path to unix socket if using local socket */</span></div>
<div class="line"><a name="l00292"></a><span class="lineno"><a class="code" href="structsettings.html#af277fc65f2ad1e28b75305e1b4366b8a">  292</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structsettings.html#af277fc65f2ad1e28b75305e1b4366b8a">access</a>;  <span class="comment">/* access mask (a la chmod) for unix domain socket */</span></div>
<div class="line"><a name="l00293"></a><span class="lineno"><a class="code" href="structsettings.html#aa0c4be9f40fe18de45a3ee9bb9fda8a6">  293</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="structsettings.html#aa0c4be9f40fe18de45a3ee9bb9fda8a6">factor</a>;          <span class="comment">/* chunk size growth factor */</span></div>
<div class="line"><a name="l00294"></a><span class="lineno"><a class="code" href="structsettings.html#a59bb385a05df23defc39f23a4b95b2be">  294</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structsettings.html#a59bb385a05df23defc39f23a4b95b2be">chunk_size</a>;</div>
<div class="line"><a name="l00295"></a><span class="lineno"><a class="code" href="structsettings.html#ab7886bf6034656be4f274719e2f6c4a1">  295</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structsettings.html#ab7886bf6034656be4f274719e2f6c4a1">num_threads</a>;        <span class="comment">/* number of worker (without dispatcher) libevent threads to run */</span></div>
<div class="line"><a name="l00296"></a><span class="lineno"><a class="code" href="structsettings.html#a5854bd3fdfc2aeefb2c5b52e9f1d214a">  296</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structsettings.html#a5854bd3fdfc2aeefb2c5b52e9f1d214a">num_threads_per_udp</a>; <span class="comment">/* number of worker threads serving each udp socket */</span></div>
<div class="line"><a name="l00297"></a><span class="lineno"><a class="code" href="structsettings.html#a3f7e4aa1d7561b994111a9e47f82f1bb">  297</a></span>&#160;    <span class="keywordtype">char</span> <a class="code" href="structsettings.html#a3f7e4aa1d7561b994111a9e47f82f1bb">prefix_delimiter</a>;  <span class="comment">/* character that marks a key prefix (for stats) */</span></div>
<div class="line"><a name="l00298"></a><span class="lineno"><a class="code" href="structsettings.html#ab49cd2e86b9b26f407fe76569560a9df">  298</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structsettings.html#ab49cd2e86b9b26f407fe76569560a9df">detail_enabled</a>;     <span class="comment">/* nonzero if we&#39;re collecting detailed stats */</span></div>
<div class="line"><a name="l00299"></a><span class="lineno"><a class="code" href="structsettings.html#a85ffd37171524861e0e384bb5c607e17">  299</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structsettings.html#a85ffd37171524861e0e384bb5c607e17">reqs_per_event</a>;     <span class="comment">/* Maximum number of io to process on each</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment">                               io-event. */</span></div>
<div class="line"><a name="l00301"></a><span class="lineno"><a class="code" href="structsettings.html#adf2782217e9e89322915fb32fee95880">  301</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="structsettings.html#adf2782217e9e89322915fb32fee95880">use_cas</a>;</div>
<div class="line"><a name="l00302"></a><span class="lineno"><a class="code" href="structsettings.html#a1b97e19cded14738b4dd0f3411a06624">  302</a></span>&#160;    <span class="keyword">enum</span> <a class="code" href="memcached_8h.html#add2ec924c0f221790d7235ffb2e615cd">protocol</a> <a class="code" href="structsettings.html#a1b97e19cded14738b4dd0f3411a06624">binding_protocol</a>;</div>
<div class="line"><a name="l00303"></a><span class="lineno"><a class="code" href="structsettings.html#af38c63a2526c784f539575bf15525ca2">  303</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structsettings.html#af38c63a2526c784f539575bf15525ca2">backlog</a>;</div>
<div class="line"><a name="l00304"></a><span class="lineno"><a class="code" href="structsettings.html#ac25d74136ec25a9278659f7b17175913">  304</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structsettings.html#ac25d74136ec25a9278659f7b17175913">item_size_max</a>;        <span class="comment">/* Maximum item size, and upper end for slabs */</span></div>
<div class="line"><a name="l00305"></a><span class="lineno"><a class="code" href="structsettings.html#a0bce00ac7a25b0a0966fc191b1dd4aed">  305</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="structsettings.html#a0bce00ac7a25b0a0966fc191b1dd4aed">sasl</a>;              <span class="comment">/* SASL on/off */</span></div>
<div class="line"><a name="l00306"></a><span class="lineno"><a class="code" href="structsettings.html#ab54ba4ca6b5a3adb61f2bc384d195819">  306</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="structsettings.html#ab54ba4ca6b5a3adb61f2bc384d195819">maxconns_fast</a>;     <span class="comment">/* Whether or not to early close connections */</span></div>
<div class="line"><a name="l00307"></a><span class="lineno"><a class="code" href="structsettings.html#ae2a53748ef612b353058e4b4ec31d52b">  307</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="structsettings.html#ae2a53748ef612b353058e4b4ec31d52b">slab_reassign</a>;     <span class="comment">/* Whether or not slab reassignment is allowed */</span></div>
<div class="line"><a name="l00308"></a><span class="lineno"><a class="code" href="structsettings.html#ae33d0579bf5c5d45f42f106babfef05b">  308</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structsettings.html#ae33d0579bf5c5d45f42f106babfef05b">slab_automove</a>;     <span class="comment">/* Whether or not to automatically move slabs */</span></div>
<div class="line"><a name="l00309"></a><span class="lineno"><a class="code" href="structsettings.html#aa02aec8eb628eeb61b600dea891f8c30">  309</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structsettings.html#aa02aec8eb628eeb61b600dea891f8c30">hashpower_init</a>;     <span class="comment">/* Starting hash power level */</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;};</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="keyword">extern</span> <span class="keyword">struct </span><a class="code" href="structstats.html">stats</a> <a class="code" href="structstats.html">stats</a>;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="keyword">extern</span> time_t <a class="code" href="memcached_8c.html#a584cbee39bbab65f2c8d87932cf92140">process_started</a>;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="keyword">extern</span> <span class="keyword">struct </span><a class="code" href="structsettings.html">settings</a> <a class="code" href="structsettings.html">settings</a>;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div>
<div class="line"><a name="l00316"></a><span class="lineno"><a class="code" href="memcached_8h.html#a0fdfa9fdfdd2d9cd25d7bd7ad6033e03">  316</a></span>&#160;<span class="preprocessor">#define ITEM_LINKED 1</span></div>
<div class="line"><a name="l00317"></a><span class="lineno"><a class="code" href="memcached_8h.html#a92c9e4680eee65905b0518321805430f">  317</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define ITEM_CAS 2</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="comment">/* temp */</span></div>
<div class="line"><a name="l00320"></a><span class="lineno"><a class="code" href="memcached_8h.html#a0eac12291582819219bf0f6ce9124364">  320</a></span>&#160;<span class="preprocessor">#define ITEM_SLABBED 4</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00322"></a><span class="lineno"><a class="code" href="memcached_8h.html#a91ec0d5dfe2c5051b6af0beede02a628">  322</a></span>&#160;<span class="preprocessor">#define ITEM_FETCHED 8</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00327"></a><span class="lineno"><a class="code" href="struct__stritem.html">  327</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct__stritem.html">_stritem</a> {</div>
<div class="line"><a name="l00328"></a><span class="lineno"><a class="code" href="struct__stritem.html#ad7f5d4ca7eae6391b02a8e0d95c99b87">  328</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="struct__stritem.html">_stritem</a> *<a class="code" href="struct__stritem.html#ad7f5d4ca7eae6391b02a8e0d95c99b87">next</a>;</div>
<div class="line"><a name="l00329"></a><span class="lineno"><a class="code" href="struct__stritem.html#afcc1decef9e8c41fb64f4995462a08fa">  329</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="struct__stritem.html">_stritem</a> *<a class="code" href="struct__stritem.html#afcc1decef9e8c41fb64f4995462a08fa">prev</a>;</div>
<div class="line"><a name="l00330"></a><span class="lineno"><a class="code" href="struct__stritem.html#acc3bc0ca62146131ad8ae8518545e11b">  330</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="struct__stritem.html">_stritem</a> *<a class="code" href="struct__stritem.html#acc3bc0ca62146131ad8ae8518545e11b">h_next</a>;    <span class="comment">/* hash chain next */</span></div>
<div class="line"><a name="l00331"></a><span class="lineno"><a class="code" href="struct__stritem.html#a7953b640eea943ce42644c00136cd462">  331</a></span>&#160;    <a class="code" href="memcached_8h.html#a602ccc3d124c1c56b6afe0ae93e04bc4">rel_time_t</a>      <a class="code" href="struct__stritem.html#a7953b640eea943ce42644c00136cd462">time</a>;       <span class="comment">/* least recent access */</span></div>
<div class="line"><a name="l00332"></a><span class="lineno"><a class="code" href="struct__stritem.html#afd87174e4e2f16bf48a950ff28ba65d4">  332</a></span>&#160;    <a class="code" href="memcached_8h.html#a602ccc3d124c1c56b6afe0ae93e04bc4">rel_time_t</a>      <a class="code" href="struct__stritem.html#afd87174e4e2f16bf48a950ff28ba65d4">exptime</a>;    <span class="comment">/* expire time */</span></div>
<div class="line"><a name="l00333"></a><span class="lineno"><a class="code" href="struct__stritem.html#ae718d73982b5d22c28887575e9e4dcd4">  333</a></span>&#160;    <span class="keywordtype">int</span>             <a class="code" href="struct__stritem.html#ae718d73982b5d22c28887575e9e4dcd4">nbytes</a>;     <span class="comment">/* size of data */</span></div>
<div class="line"><a name="l00334"></a><span class="lineno"><a class="code" href="struct__stritem.html#af4b10743e972c424f170f3bbc277ded5">  334</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>  <a class="code" href="struct__stritem.html#af4b10743e972c424f170f3bbc277ded5">refcount</a>;</div>
<div class="line"><a name="l00335"></a><span class="lineno"><a class="code" href="struct__stritem.html#ad104597f204745473144018ef15c1459">  335</a></span>&#160;    uint8_t         <a class="code" href="struct__stritem.html#ad104597f204745473144018ef15c1459">nsuffix</a>;    <span class="comment">/* length of flags-and-length string */</span></div>
<div class="line"><a name="l00336"></a><span class="lineno"><a class="code" href="struct__stritem.html#a35e3398ad4aaed940e920c99157eca10">  336</a></span>&#160;    uint8_t         <a class="code" href="struct__stritem.html#a35e3398ad4aaed940e920c99157eca10">it_flags</a>;   <span class="comment">/* ITEM_* above */</span></div>
<div class="line"><a name="l00337"></a><span class="lineno"><a class="code" href="struct__stritem.html#a2b9111cab21baa2ee90bd8866e7be988">  337</a></span>&#160;    uint8_t         <a class="code" href="struct__stritem.html#a2b9111cab21baa2ee90bd8866e7be988">slabs_clsid</a>;<span class="comment">/* which slab class we&#39;re in */</span></div>
<div class="line"><a name="l00338"></a><span class="lineno"><a class="code" href="struct__stritem.html#a5e19a37b7235464196b4155a46758ff4">  338</a></span>&#160;    uint8_t         <a class="code" href="struct__stritem.html#a5e19a37b7235464196b4155a46758ff4">nkey</a>;       <span class="comment">/* key length, w/terminating null and padding */</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="comment">/* this odd type prevents type-punning issues when we do</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment">     * the little shuffle to save space when not using CAS. */</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keyword">union </span>{</div>
<div class="line"><a name="l00342"></a><span class="lineno"><a class="code" href="struct__stritem.html#a4d0c111b1e528d210d403cde5e59e67c">  342</a></span>&#160;        uint64_t <a class="code" href="struct__stritem.html#a4d0c111b1e528d210d403cde5e59e67c">cas</a>;</div>
<div class="line"><a name="l00343"></a><span class="lineno"><a class="code" href="struct__stritem.html#a4c77a3f6f08b826aaa2afdeefde68809">  343</a></span>&#160;        <span class="keywordtype">char</span> <a class="code" href="struct__stritem.html#a4c77a3f6f08b826aaa2afdeefde68809">end</a>;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    } <a class="code" href="struct__stritem.html#a03f181c55ee538a4a1dd0ca0592e42c6">data</a>[];</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="comment">/* if it_flags &amp; ITEM_CAS we have 8 bytes CAS */</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="comment">/* then null-terminated key */</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="comment">/* then &quot; flags length\r\n&quot; (no terminating null) */</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="comment">/* then data with terminating \r\n (no terminating null; it&#39;s binary!) */</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;} <a class="code" href="memcached_8h.html#a9063e222b7bfc97808e1ac9ad9053b6e">item</a>;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div>
<div class="line"><a name="l00351"></a><span class="lineno"><a class="code" href="structLIBEVENT__THREAD.html">  351</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line"><a name="l00352"></a><span class="lineno"><a class="code" href="structLIBEVENT__THREAD.html#ab491d0e009031a4266f9f81e96129309">  352</a></span>&#160;    pthread_t <a class="code" href="structLIBEVENT__THREAD.html#ab491d0e009031a4266f9f81e96129309">thread_id</a>;        <span class="comment">/* unique ID of this thread */</span></div>
<div class="line"><a name="l00353"></a><span class="lineno"><a class="code" href="structLIBEVENT__THREAD.html#aedc60f547936f4659d10c690f5eeeada">  353</a></span>&#160;    <span class="keyword">struct </span>event_base *<a class="code" href="structLIBEVENT__THREAD.html#aedc60f547936f4659d10c690f5eeeada">base</a>;    <span class="comment">/* libevent handle this thread uses */</span></div>
<div class="line"><a name="l00354"></a><span class="lineno"><a class="code" href="structLIBEVENT__THREAD.html#aa291c9fc61c0ae2e403aa8feeaa59094">  354</a></span>&#160;    <span class="keyword">struct </span>event notify_event;  <span class="comment">/* listen event for notify pipe */</span></div>
<div class="line"><a name="l00355"></a><span class="lineno"><a class="code" href="structLIBEVENT__THREAD.html#a01d0d9093c0f04bda0656d0aa6f170e9">  355</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structLIBEVENT__THREAD.html#a01d0d9093c0f04bda0656d0aa6f170e9">notify_receive_fd</a>;      <span class="comment">/* receiving end of notify pipe */</span></div>
<div class="line"><a name="l00356"></a><span class="lineno"><a class="code" href="structLIBEVENT__THREAD.html#ad53e4c5a53ae00ed1f08d8476981c36b">  356</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structLIBEVENT__THREAD.html#ad53e4c5a53ae00ed1f08d8476981c36b">notify_send_fd</a>;         <span class="comment">/* sending end of notify pipe */</span></div>
<div class="line"><a name="l00357"></a><span class="lineno"><a class="code" href="structLIBEVENT__THREAD.html#ab81f0ce2ef093d3d50c78d51ab5d4c8c">  357</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structthread__stats.html">thread_stats</a> <a class="code" href="structstats.html">stats</a>;  <span class="comment">/* Stats generated by this thread */</span></div>
<div class="line"><a name="l00358"></a><span class="lineno"><a class="code" href="structLIBEVENT__THREAD.html#a79dc836742346c8db838951b2d6f46c5">  358</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structconn__queue.html">conn_queue</a> *<a class="code" href="structLIBEVENT__THREAD.html#a79dc836742346c8db838951b2d6f46c5">new_conn_queue</a>; <span class="comment">/* queue of new connections to handle */</span></div>
<div class="line"><a name="l00359"></a><span class="lineno"><a class="code" href="structLIBEVENT__THREAD.html#a3160d4b7285bf6995ce960b0189da3f5">  359</a></span>&#160;    <a class="code" href="structcache__t.html">cache_t</a> *<a class="code" href="structLIBEVENT__THREAD.html#a3160d4b7285bf6995ce960b0189da3f5">suffix_cache</a>;      <span class="comment">/* suffix cache */</span></div>
<div class="line"><a name="l00360"></a><span class="lineno"><a class="code" href="structLIBEVENT__THREAD.html#aaa70f9a2c35126a104fc1a4efa056520">  360</a></span>&#160;    uint8_t <a class="code" href="structLIBEVENT__THREAD.html#aaa70f9a2c35126a104fc1a4efa056520">item_lock_type</a>;     <span class="comment">/* use fine-grained or global item lock */</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;} <a class="code" href="structLIBEVENT__THREAD.html">LIBEVENT_THREAD</a>;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div>
<div class="line"><a name="l00363"></a><span class="lineno"><a class="code" href="structLIBEVENT__DISPATCHER__THREAD.html">  363</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line"><a name="l00364"></a><span class="lineno"><a class="code" href="structLIBEVENT__DISPATCHER__THREAD.html#a501ff47c83d2a736d680e346489f2b11">  364</a></span>&#160;    pthread_t <a class="code" href="structLIBEVENT__DISPATCHER__THREAD.html#a501ff47c83d2a736d680e346489f2b11">thread_id</a>;        <span class="comment">/* unique ID of this thread */</span></div>
<div class="line"><a name="l00365"></a><span class="lineno"><a class="code" href="structLIBEVENT__DISPATCHER__THREAD.html#ab73cae5d579c1d0e29ae23f2ed6141b8">  365</a></span>&#160;    <span class="keyword">struct </span>event_base *<a class="code" href="structLIBEVENT__DISPATCHER__THREAD.html#ab73cae5d579c1d0e29ae23f2ed6141b8">base</a>;    <span class="comment">/* libevent handle this thread uses */</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;} <a class="code" href="structLIBEVENT__DISPATCHER__THREAD.html">LIBEVENT_DISPATCHER_THREAD</a>;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div>
<div class="line"><a name="l00371"></a><span class="lineno"><a class="code" href="memcached_8h.html#a6b845d48e30cbb66add29598de2e00a6">  371</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structconn.html">conn</a> <a class="code" href="structconn.html">conn</a>;</div>
<div class="line"><a name="l00372"></a><span class="lineno"><a class="code" href="structconn.html">  372</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structconn.html">conn</a> {</div>
<div class="line"><a name="l00373"></a><span class="lineno"><a class="code" href="structconn.html#a37f7969ba27e8ae9461a1d3b378351d6">  373</a></span>&#160;    <span class="keywordtype">int</span>    <a class="code" href="structconn.html#a37f7969ba27e8ae9461a1d3b378351d6">sfd</a>;</div>
<div class="line"><a name="l00374"></a><span class="lineno"><a class="code" href="structconn.html#a0633fcf7a7f71582b70ec02d148a18b0">  374</a></span>&#160;    <a class="code" href="sasl__defs_8h.html#a5e5e144ff144c624e347ca7f12ec5eea">sasl_conn_t</a> *<a class="code" href="structconn.html#a0633fcf7a7f71582b70ec02d148a18b0">sasl_conn</a>;</div>
<div class="line"><a name="l00375"></a><span class="lineno"><a class="code" href="structconn.html#a17e40cc90c3669ee5e50df2ded95c3d0">  375</a></span>&#160;    <span class="keyword">enum</span> <a class="code" href="memcached_8h.html#a397f77d103168a504b5fbc801538f2a7">conn_states</a>  <a class="code" href="structconn.html#a17e40cc90c3669ee5e50df2ded95c3d0">state</a>;</div>
<div class="line"><a name="l00376"></a><span class="lineno"><a class="code" href="structconn.html#ab0cc8eac6501657700093908c092ed3e">  376</a></span>&#160;    <span class="keyword">enum</span> <a class="code" href="memcached_8h.html#ae281f6c321ed03cfb642a50e205177c7">bin_substates</a> <a class="code" href="structconn.html#ab0cc8eac6501657700093908c092ed3e">substate</a>;</div>
<div class="line"><a name="l00377"></a><span class="lineno"><a class="code" href="structconn.html#af1b2df9ad39a82ce06a008b1b04567c3">  377</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structconn.html#af1b2df9ad39a82ce06a008b1b04567c3">event</a> <a class="code" href="structconn.html#af1b2df9ad39a82ce06a008b1b04567c3">event</a>;</div>
<div class="line"><a name="l00378"></a><span class="lineno"><a class="code" href="structconn.html#a523af570f5630fb5c1aaf51d87c96abc">  378</a></span>&#160;    <span class="keywordtype">short</span>  <a class="code" href="structconn.html#a523af570f5630fb5c1aaf51d87c96abc">ev_flags</a>;</div>
<div class="line"><a name="l00379"></a><span class="lineno"><a class="code" href="structconn.html#ad4b85274b88921db50c2a221386ca5fe">  379</a></span>&#160;    <span class="keywordtype">short</span>  <a class="code" href="structconn.html#ad4b85274b88921db50c2a221386ca5fe">which</a>;   </div>
<div class="line"><a name="l00381"></a><span class="lineno"><a class="code" href="structconn.html#ac0b276582776af667fe88bf6a73a57b1">  381</a></span>&#160;    <span class="keywordtype">char</span>   *<a class="code" href="structconn.html#ac0b276582776af667fe88bf6a73a57b1">rbuf</a>;   </div>
<div class="line"><a name="l00382"></a><span class="lineno"><a class="code" href="structconn.html#a321f9c23c4a20d15d16630c5648ac41a">  382</a></span>&#160;    <span class="keywordtype">char</span>   *<a class="code" href="structconn.html#a321f9c23c4a20d15d16630c5648ac41a">rcurr</a>;  </div>
<div class="line"><a name="l00383"></a><span class="lineno"><a class="code" href="structconn.html#afd9d7b8a1c2cdba5edd4772fae8adc23">  383</a></span>&#160;    <span class="keywordtype">int</span>    <a class="code" href="structconn.html#afd9d7b8a1c2cdba5edd4772fae8adc23">rsize</a>;   </div>
<div class="line"><a name="l00384"></a><span class="lineno"><a class="code" href="structconn.html#a4a7eed4d30ba338ae092ec2011e21982">  384</a></span>&#160;    <span class="keywordtype">int</span>    <a class="code" href="structconn.html#a4a7eed4d30ba338ae092ec2011e21982">rbytes</a>;  </div>
<div class="line"><a name="l00386"></a><span class="lineno"><a class="code" href="structconn.html#ab7bcc3e0bf2d962d2f7aad53c6b523b7">  386</a></span>&#160;    <span class="keywordtype">char</span>   *<a class="code" href="structconn.html#ab7bcc3e0bf2d962d2f7aad53c6b523b7">wbuf</a>;</div>
<div class="line"><a name="l00387"></a><span class="lineno"><a class="code" href="structconn.html#ad509acb6e118d4ff9991c4592ed4a544">  387</a></span>&#160;    <span class="keywordtype">char</span>   *<a class="code" href="structconn.html#ad509acb6e118d4ff9991c4592ed4a544">wcurr</a>;</div>
<div class="line"><a name="l00388"></a><span class="lineno"><a class="code" href="structconn.html#adb55062a3fa6dcacae12144f8756eb0f">  388</a></span>&#160;    <span class="keywordtype">int</span>    <a class="code" href="structconn.html#adb55062a3fa6dcacae12144f8756eb0f">wsize</a>;</div>
<div class="line"><a name="l00389"></a><span class="lineno"><a class="code" href="structconn.html#a5df3a395efeb81c9ea517a81338ba1df">  389</a></span>&#160;    <span class="keywordtype">int</span>    <a class="code" href="structconn.html#a5df3a395efeb81c9ea517a81338ba1df">wbytes</a>;</div>
<div class="line"><a name="l00391"></a><span class="lineno"><a class="code" href="structconn.html#a3e8b2f5988a9791a105de7534aa8b29f">  391</a></span>&#160;    <span class="keyword">enum</span> <a class="code" href="memcached_8h.html#a397f77d103168a504b5fbc801538f2a7">conn_states</a>  <a class="code" href="structconn.html#a3e8b2f5988a9791a105de7534aa8b29f">write_and_go</a>;</div>
<div class="line"><a name="l00392"></a><span class="lineno"><a class="code" href="structconn.html#a6dff98252f504190f1f3412650ef5da4">  392</a></span>&#160;    <span class="keywordtype">void</span>   *<a class="code" href="structconn.html#a6dff98252f504190f1f3412650ef5da4">write_and_free</a>; </div>
<div class="line"><a name="l00394"></a><span class="lineno"><a class="code" href="structconn.html#a28de9d8a5b9432c6f4ad521fc7875ea8">  394</a></span>&#160;    <span class="keywordtype">char</span>   *<a class="code" href="structconn.html#a28de9d8a5b9432c6f4ad521fc7875ea8">ritem</a>;  </div>
<div class="line"><a name="l00395"></a><span class="lineno"><a class="code" href="structconn.html#a47f8791b09c3105ecca911bea9b73406">  395</a></span>&#160;    <span class="keywordtype">int</span>    <a class="code" href="structconn.html#a47f8791b09c3105ecca911bea9b73406">rlbytes</a>;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="comment">/* data for the nread state */</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div>
<div class="line"><a name="l00405"></a><span class="lineno"><a class="code" href="structconn.html#a7d40cb08fdb16c8cad53b9c78c542e65">  405</a></span>&#160;    <span class="keywordtype">void</span>   *<a class="code" href="structconn.html#a7d40cb08fdb16c8cad53b9c78c542e65">item</a>;     <span class="comment">/* for commands set/add/replace  */</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="comment">/* data for the swallow state */</span></div>
<div class="line"><a name="l00408"></a><span class="lineno"><a class="code" href="structconn.html#a5f95cd3a1e8b56dd5af48534162d4188">  408</a></span>&#160;    <span class="keywordtype">int</span>    <a class="code" href="structconn.html#a5f95cd3a1e8b56dd5af48534162d4188">sbytes</a>;    <span class="comment">/* how many bytes to swallow */</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="comment">/* data for the mwrite state */</span></div>
<div class="line"><a name="l00411"></a><span class="lineno"><a class="code" href="structconn.html#a7fa506eb093e715dba7c51e373adf332">  411</a></span>&#160;    <span class="keyword">struct </span>iovec *<a class="code" href="structconn.html#a7fa506eb093e715dba7c51e373adf332">iov</a>;</div>
<div class="line"><a name="l00412"></a><span class="lineno"><a class="code" href="structconn.html#aa9e54ceb57a50b642bb6733f654f67ef">  412</a></span>&#160;    <span class="keywordtype">int</span>    <a class="code" href="structconn.html#aa9e54ceb57a50b642bb6733f654f67ef">iovsize</a>;   <span class="comment">/* number of elements allocated in iov[] */</span></div>
<div class="line"><a name="l00413"></a><span class="lineno"><a class="code" href="structconn.html#a4bfd124c25febb5c0473a64010a5e04c">  413</a></span>&#160;    <span class="keywordtype">int</span>    <a class="code" href="structconn.html#a4bfd124c25febb5c0473a64010a5e04c">iovused</a>;   <span class="comment">/* number of elements used in iov[] */</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div>
<div class="line"><a name="l00415"></a><span class="lineno"><a class="code" href="structconn.html#a5ecb2828d6d2bd7d2e1bbe39d16ec5b9">  415</a></span>&#160;    <span class="keyword">struct </span>msghdr *<a class="code" href="structconn.html#a5ecb2828d6d2bd7d2e1bbe39d16ec5b9">msglist</a>;</div>
<div class="line"><a name="l00416"></a><span class="lineno"><a class="code" href="structconn.html#a4a88af6a9aa8f5723163ce46109d424e">  416</a></span>&#160;    <span class="keywordtype">int</span>    <a class="code" href="structconn.html#a4a88af6a9aa8f5723163ce46109d424e">msgsize</a>;   <span class="comment">/* number of elements allocated in msglist[] */</span></div>
<div class="line"><a name="l00417"></a><span class="lineno"><a class="code" href="structconn.html#a64b2e5b69fad86aa6f298c055fc96aae">  417</a></span>&#160;    <span class="keywordtype">int</span>    <a class="code" href="structconn.html#a64b2e5b69fad86aa6f298c055fc96aae">msgused</a>;   <span class="comment">/* number of elements used in msglist[] */</span></div>
<div class="line"><a name="l00418"></a><span class="lineno"><a class="code" href="structconn.html#aa154e25e69a11d7837749a50523a60ea">  418</a></span>&#160;    <span class="keywordtype">int</span>    <a class="code" href="structconn.html#aa154e25e69a11d7837749a50523a60ea">msgcurr</a>;   <span class="comment">/* element in msglist[] being transmitted now */</span></div>
<div class="line"><a name="l00419"></a><span class="lineno"><a class="code" href="structconn.html#adccea2771b5da3455ec501d046bbfbb2">  419</a></span>&#160;    <span class="keywordtype">int</span>    <a class="code" href="structconn.html#adccea2771b5da3455ec501d046bbfbb2">msgbytes</a>;  <span class="comment">/* number of bytes in current msg */</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div>
<div class="line"><a name="l00421"></a><span class="lineno"><a class="code" href="structconn.html#a3f8edd0d1efc80f5d9e1f519581d459e">  421</a></span>&#160;    <a class="code" href="struct__stritem.html">item</a>   **<a class="code" href="structconn.html#a3f8edd0d1efc80f5d9e1f519581d459e">ilist</a>;   <span class="comment">/* list of items to write out */</span></div>
<div class="line"><a name="l00422"></a><span class="lineno"><a class="code" href="structconn.html#a864209402985a2c5fa5a5215f1dfe8dc">  422</a></span>&#160;    <span class="keywordtype">int</span>    <a class="code" href="structconn.html#a864209402985a2c5fa5a5215f1dfe8dc">isize</a>;</div>
<div class="line"><a name="l00423"></a><span class="lineno"><a class="code" href="structconn.html#a496919c8fa5cdbfba62d8d8beb7bddae">  423</a></span>&#160;    <a class="code" href="struct__stritem.html">item</a>   **<a class="code" href="structconn.html#a496919c8fa5cdbfba62d8d8beb7bddae">icurr</a>;</div>
<div class="line"><a name="l00424"></a><span class="lineno"><a class="code" href="structconn.html#aecd54059ef51d05fcb5cfdb9c7317903">  424</a></span>&#160;    <span class="keywordtype">int</span>    <a class="code" href="structconn.html#aecd54059ef51d05fcb5cfdb9c7317903">ileft</a>;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div>
<div class="line"><a name="l00426"></a><span class="lineno"><a class="code" href="structconn.html#a75d646e58527bdaa2416942097938c93">  426</a></span>&#160;    <span class="keywordtype">char</span>   **<a class="code" href="structconn.html#a75d646e58527bdaa2416942097938c93">suffixlist</a>;</div>
<div class="line"><a name="l00427"></a><span class="lineno"><a class="code" href="structconn.html#aaea0ce1e0d7986281960a6a7a063e701">  427</a></span>&#160;    <span class="keywordtype">int</span>    <a class="code" href="structconn.html#aaea0ce1e0d7986281960a6a7a063e701">suffixsize</a>;</div>
<div class="line"><a name="l00428"></a><span class="lineno"><a class="code" href="structconn.html#a24bdb9aaa257aeacfa8703c6f0a808da">  428</a></span>&#160;    <span class="keywordtype">char</span>   **<a class="code" href="structconn.html#a24bdb9aaa257aeacfa8703c6f0a808da">suffixcurr</a>;</div>
<div class="line"><a name="l00429"></a><span class="lineno"><a class="code" href="structconn.html#a7b1984060d5b4b2aea26905718cb42c8">  429</a></span>&#160;    <span class="keywordtype">int</span>    <a class="code" href="structconn.html#a7b1984060d5b4b2aea26905718cb42c8">suffixleft</a>;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div>
<div class="line"><a name="l00431"></a><span class="lineno"><a class="code" href="structconn.html#aef35eff4856a49adaee2299596a00988">  431</a></span>&#160;    <span class="keyword">enum</span> <a class="code" href="memcached_8h.html#add2ec924c0f221790d7235ffb2e615cd">protocol</a> <a class="code" href="structconn.html#aef35eff4856a49adaee2299596a00988">protocol</a>;   <span class="comment">/* which protocol this connection speaks */</span></div>
<div class="line"><a name="l00432"></a><span class="lineno"><a class="code" href="structconn.html#a6f4ac5a34c5244fd44226fbb2ca62f9f">  432</a></span>&#160;    <span class="keyword">enum</span> <a class="code" href="memcached_8h.html#ab2a402bae66e9d81d0928284b707a47c">network_transport</a> <a class="code" href="structconn.html#a6f4ac5a34c5244fd44226fbb2ca62f9f">transport</a>; <span class="comment">/* what transport is used by this connection */</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="comment">/* data for UDP clients */</span></div>
<div class="line"><a name="l00435"></a><span class="lineno"><a class="code" href="structconn.html#a40f2af0bb917ca015ad366811e950ee0">  435</a></span>&#160;    <span class="keywordtype">int</span>    <a class="code" href="structconn.html#a40f2af0bb917ca015ad366811e950ee0">request_id</a>; <span class="comment">/* Incoming UDP request ID, if this is a UDP &quot;connection&quot; */</span></div>
<div class="line"><a name="l00436"></a><span class="lineno"><a class="code" href="structconn.html#acb126c7b0c4b0513fb1bfa40189407d1">  436</a></span>&#160;    <span class="keyword">struct </span>sockaddr <a class="code" href="structconn.html#acb126c7b0c4b0513fb1bfa40189407d1">request_addr</a>; <span class="comment">/* Who sent the most recent request */</span></div>
<div class="line"><a name="l00437"></a><span class="lineno"><a class="code" href="structconn.html#ad5589e72b5427937e81116f846e20380">  437</a></span>&#160;    socklen_t <a class="code" href="structconn.html#ad5589e72b5427937e81116f846e20380">request_addr_size</a>;</div>
<div class="line"><a name="l00438"></a><span class="lineno"><a class="code" href="structconn.html#ac98cb4f13ddb0a4c8682c8764ee21ec0">  438</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="structconn.html#ac98cb4f13ddb0a4c8682c8764ee21ec0">hdrbuf</a>; <span class="comment">/* udp packet headers */</span></div>
<div class="line"><a name="l00439"></a><span class="lineno"><a class="code" href="structconn.html#aa58fbb1de414bafa4d2fb5d6568194aa">  439</a></span>&#160;    <span class="keywordtype">int</span>    <a class="code" href="structconn.html#aa58fbb1de414bafa4d2fb5d6568194aa">hdrsize</a>;   <span class="comment">/* number of headers&#39; worth of space is allocated */</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div>
<div class="line"><a name="l00441"></a><span class="lineno"><a class="code" href="structconn.html#a5f59d93a1fb729ab33b66e3cf15e8466">  441</a></span>&#160;    <span class="keywordtype">bool</span>   <a class="code" href="structconn.html#a5f59d93a1fb729ab33b66e3cf15e8466">noreply</a>;   <span class="comment">/* True if the reply should not be sent. */</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="comment">/* current stats command */</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="keyword">struct </span>{</div>
<div class="line"><a name="l00444"></a><span class="lineno"><a class="code" href="structconn.html#ae58d1fb50279ca7d206e32707ff477f6">  444</a></span>&#160;        <span class="keywordtype">char</span> *<a class="code" href="structconn.html#ae58d1fb50279ca7d206e32707ff477f6">buffer</a>;</div>
<div class="line"><a name="l00445"></a><span class="lineno"><a class="code" href="structconn.html#ab5d5df899a9e2dc1dfc8aec8afa68c64">  445</a></span>&#160;        <span class="keywordtype">size_t</span> <a class="code" href="structconn.html#ab5d5df899a9e2dc1dfc8aec8afa68c64">size</a>;</div>
<div class="line"><a name="l00446"></a><span class="lineno"><a class="code" href="structconn.html#af796a28dffee965d3b331631fbbcc15d">  446</a></span>&#160;        <span class="keywordtype">size_t</span> <a class="code" href="structconn.html#af796a28dffee965d3b331631fbbcc15d">offset</a>;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    } <a class="code" href="structconn.html#a1b29cc4b5bd2e6d52f72a6d7ba8b8648">stats</a>;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="comment">/* Binary protocol stuff */</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="comment">/* This is where the binary header goes */</span></div>
<div class="line"><a name="l00451"></a><span class="lineno"><a class="code" href="structconn.html#a4a5d7aea30c74698d48daef7bd8c777d">  451</a></span>&#160;    <a class="code" href="unionprotocol__binary__request__header.html">protocol_binary_request_header</a> <a class="code" href="structconn.html#a4a5d7aea30c74698d48daef7bd8c777d">binary_header</a>;</div>
<div class="line"><a name="l00452"></a><span class="lineno"><a class="code" href="structconn.html#a17e41fed262e75fc9a78c5df4828dd10">  452</a></span>&#160;    uint64_t <a class="code" href="structconn.html#a17e41fed262e75fc9a78c5df4828dd10">cas</a>; <span class="comment">/* the cas to return */</span></div>
<div class="line"><a name="l00453"></a><span class="lineno"><a class="code" href="structconn.html#a57c6c7f94cf0969745a2683ebd17e0e7">  453</a></span>&#160;    <span class="keywordtype">short</span> <a class="code" href="structconn.html#a57c6c7f94cf0969745a2683ebd17e0e7">cmd</a>; <span class="comment">/* current command being processed */</span></div>
<div class="line"><a name="l00454"></a><span class="lineno"><a class="code" href="structconn.html#a60681e2946e7ee0f6fa3433168764a3e">  454</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structconn.html#a60681e2946e7ee0f6fa3433168764a3e">opaque</a>;</div>
<div class="line"><a name="l00455"></a><span class="lineno"><a class="code" href="structconn.html#a5d99d3fe7e8dcc919ea5d94dbadcc7cd">  455</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structconn.html#a5d99d3fe7e8dcc919ea5d94dbadcc7cd">keylen</a>;</div>
<div class="line"><a name="l00456"></a><span class="lineno"><a class="code" href="structconn.html#a833a1cdb64edd1dd0784c16389135bba">  456</a></span>&#160;    <a class="code" href="structconn.html">conn</a>   *<a class="code" href="structconn.html#a833a1cdb64edd1dd0784c16389135bba">next</a>;     <span class="comment">/* Used for generating a list of conn structures */</span></div>
<div class="line"><a name="l00457"></a><span class="lineno"><a class="code" href="structconn.html#a40d01c887098f08dfc57968eec68d52f">  457</a></span>&#160;    <a class="code" href="structLIBEVENT__THREAD.html">LIBEVENT_THREAD</a> *<a class="code" href="structconn.html#a40d01c887098f08dfc57968eec68d52f">thread</a>; <span class="comment">/* Pointer to the thread object serving this connection */</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;};</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="comment">/* current time of day (updated periodically) */</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="keyword">extern</span> <span class="keyword">volatile</span> <a class="code" href="memcached_8h.html#a602ccc3d124c1c56b6afe0ae93e04bc4">rel_time_t</a> <a class="code" href="memcached_8c.html#a21b2a3d4ff751fe99cdca2d14babc559">current_time</a>;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment">/* TODO: Move to slabs.h? */</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="keyword">extern</span> <span class="keyword">volatile</span> <span class="keywordtype">int</span> <a class="code" href="memcached_8c.html#af5927ef123e1076d1e3fafb13655fdf4">slab_rebalance_signal</a>;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div>
<div class="line"><a name="l00467"></a><span class="lineno"><a class="code" href="structslab__rebalance.html">  467</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structslab__rebalance.html">slab_rebalance</a> {</div>
<div class="line"><a name="l00468"></a><span class="lineno"><a class="code" href="structslab__rebalance.html#a00a4e0cd02ef9655377d3903e69556fd">  468</a></span>&#160;    <span class="keywordtype">void</span> *<a class="code" href="structslab__rebalance.html#a00a4e0cd02ef9655377d3903e69556fd">slab_start</a>;</div>
<div class="line"><a name="l00469"></a><span class="lineno"><a class="code" href="structslab__rebalance.html#a2ad94e0a55d6c834dd9ca438a59ae99e">  469</a></span>&#160;    <span class="keywordtype">void</span> *<a class="code" href="structslab__rebalance.html#a2ad94e0a55d6c834dd9ca438a59ae99e">slab_end</a>;</div>
<div class="line"><a name="l00470"></a><span class="lineno"><a class="code" href="structslab__rebalance.html#ae356bb209df731ad4fc6197ae40005d8">  470</a></span>&#160;    <span class="keywordtype">void</span> *<a class="code" href="structslab__rebalance.html#ae356bb209df731ad4fc6197ae40005d8">slab_pos</a>;</div>
<div class="line"><a name="l00471"></a><span class="lineno"><a class="code" href="structslab__rebalance.html#a0ba91d1a7f719e3eedc1c46b6bd7200c">  471</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structslab__rebalance.html#a0ba91d1a7f719e3eedc1c46b6bd7200c">s_clsid</a>;</div>
<div class="line"><a name="l00472"></a><span class="lineno"><a class="code" href="structslab__rebalance.html#a59704dbd4c34324a8bf4fad1fcdbf2fe">  472</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structslab__rebalance.html#a59704dbd4c34324a8bf4fad1fcdbf2fe">d_clsid</a>;</div>
<div class="line"><a name="l00473"></a><span class="lineno"><a class="code" href="structslab__rebalance.html#a3d8c3cb1e6e7398640eff006d00878d9">  473</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structslab__rebalance.html#a3d8c3cb1e6e7398640eff006d00878d9">busy_items</a>;</div>
<div class="line"><a name="l00474"></a><span class="lineno"><a class="code" href="structslab__rebalance.html#ad67d3145e1a11a3509bc8d7a0c62d282">  474</a></span>&#160;    uint8_t <a class="code" href="structslab__rebalance.html#ad67d3145e1a11a3509bc8d7a0c62d282">done</a>;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;};</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="keyword">extern</span> <span class="keyword">struct </span><a class="code" href="structslab__rebalance.html">slab_rebalance</a> <a class="code" href="memcached_8c.html#a656dffd2362c3d33d9e1710e02b11e0a">slab_rebal</a>;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="comment"> * Functions</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="keywordtype">void</span> <a class="code" href="memcached_8c.html#ab3208d47b8d38af6818f6ced54e4d62c">do_accept_new_conns</a>(<span class="keyword">const</span> <span class="keywordtype">bool</span> do_accept);</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="keyword">enum</span> <a class="code" href="memcached_8h.html#ac1341dff6a89ead35b6c23f93cd3afb6">delta_result_type</a> <a class="code" href="memcached_8c.html#a7737d09843882c635bc3483810acf530">do_add_delta</a>(<a class="code" href="structconn.html">conn</a> *c, <span class="keyword">const</span> <span class="keywordtype">char</span> *key,</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                                    <span class="keyword">const</span> <span class="keywordtype">size_t</span> nkey, <span class="keyword">const</span> <span class="keywordtype">bool</span> incr,</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                                    <span class="keyword">const</span> int64_t delta, <span class="keywordtype">char</span> *buf,</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                                    uint64_t *cas, <span class="keyword">const</span> uint32_t hv);</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="keyword">enum</span> <a class="code" href="memcached_8h.html#a1cf8921762294d73fe28150b7fa2a18e">store_item_type</a> <a class="code" href="memcached_8c.html#a76216dc5d514d0ba2632ffd7661080ad">do_store_item</a>(<a class="code" href="struct__stritem.html">item</a> *<a class="code" href="struct__stritem.html">item</a>, <span class="keywordtype">int</span> comm, <a class="code" href="structconn.html">conn</a>* c, <span class="keyword">const</span> uint32_t hv);</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<a class="code" href="structconn.html">conn</a> *<a class="code" href="memcached_8c.html#ae8597c761e8dc378f92f51e185778af4">conn_new</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> sfd, <span class="keyword">const</span> <span class="keyword">enum</span> <a class="code" href="memcached_8h.html#a397f77d103168a504b5fbc801538f2a7">conn_states</a> init_state, <span class="keyword">const</span> <span class="keywordtype">int</span> event_flags, <span class="keyword">const</span> <span class="keywordtype">int</span> read_buffer_size, <span class="keyword">enum</span> <a class="code" href="memcached_8h.html#ab2a402bae66e9d81d0928284b707a47c">network_transport</a> transport, <span class="keyword">struct</span> event_base *base);</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="daemon_8c.html#a78ff9cfa411dda44b12c1dd5e5d078e6">daemonize</a>(<span class="keywordtype">int</span> nochdir, <span class="keywordtype">int</span> noclose);</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> mutex_lock(pthread_mutex_t *mutex)</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;{</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="keywordflow">while</span> (pthread_mutex_trylock(mutex));</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;}</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;</div>
<div class="line"><a name="l00497"></a><span class="lineno"><a class="code" href="memcached_8h.html#a30d31de183a29d8ca7191f264faa911d">  497</a></span>&#160;<span class="preprocessor">#define mutex_unlock(x) pthread_mutex_unlock(x)</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="stats_8h.html">stats.h</a>&quot;</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="slabs_8h.html">slabs.h</a>&quot;</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="assoc_8h.html">assoc.h</a>&quot;</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="items_8h.html">items.h</a>&quot;</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="trace_8h.html">trace.h</a>&quot;</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="hash_8h.html">hash.h</a>&quot;</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="util_8h.html">util.h</a>&quot;</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment"> * Functions such as the libevent-related calls that need to do cross-thread</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment"> * communication in multithreaded mode (rather than actually doing the work</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="comment"> * in the current thread) are called via &quot;dispatch_&quot; frontends, which are</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment"> * also #define-d to directly call the underlying code in singlethreaded mode.</span></div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="keywordtype">void</span> <a class="code" href="memcached_8h.html#a79051074704249cac4424f10d4606fe3">thread_init</a>(<span class="keywordtype">int</span> nthreads, <span class="keyword">struct</span> event_base *main_base);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="keywordtype">int</span>  <a class="code" href="memcached_8h.html#a1e1a527b3b57614f719a40d83941b8fc">dispatch_event_add</a>(<span class="keywordtype">int</span> thread, <a class="code" href="structconn.html">conn</a> *c);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="keywordtype">void</span> <a class="code" href="memcached_8h.html#a2997c1c6cb9e3ed321c69f82d95b7302">dispatch_conn_new</a>(<span class="keywordtype">int</span> sfd, <span class="keyword">enum</span> <a class="code" href="memcached_8h.html#a397f77d103168a504b5fbc801538f2a7">conn_states</a> init_state, <span class="keywordtype">int</span> event_flags, <span class="keywordtype">int</span> read_buffer_size, <span class="keyword">enum</span> <a class="code" href="memcached_8h.html#ab2a402bae66e9d81d0928284b707a47c">network_transport</a> transport);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="comment">/* Lock wrappers for cache functions that are called from main loop. */</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="keyword">enum</span> <a class="code" href="memcached_8h.html#ac1341dff6a89ead35b6c23f93cd3afb6">delta_result_type</a> <a class="code" href="memcached_8h.html#a0f588190a22a5121aae042ff3554a46a">add_delta</a>(<a class="code" href="structconn.html">conn</a> *c, <span class="keyword">const</span> <span class="keywordtype">char</span> *key,</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                                 <span class="keyword">const</span> <span class="keywordtype">size_t</span> nkey, <span class="keyword">const</span> <span class="keywordtype">int</span> incr,</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;                                 <span class="keyword">const</span> int64_t delta, <span class="keywordtype">char</span> *buf,</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                                 uint64_t *cas);</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="keywordtype">void</span> <a class="code" href="memcached_8h.html#a4626562440107c11cdd7cc07ba28f806">accept_new_conns</a>(<span class="keyword">const</span> <span class="keywordtype">bool</span> do_accept);</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<a class="code" href="structconn.html">conn</a> *<a class="code" href="memcached_8c.html#a9e2eb84fb0639f05a759367bf8b5ddb9">conn_from_freelist</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="keywordtype">bool</span>  <a class="code" href="memcached_8c.html#afc9ec43a3d82ca2bbaa216539353bfa2">conn_add_to_freelist</a>(<a class="code" href="structconn.html">conn</a> *c);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="keywordtype">int</span>   <a class="code" href="memcached_8h.html#af354b347a944d96a5a7644f9e84e7e7e">is_listen_thread</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<a class="code" href="struct__stritem.html">item</a> *<a class="code" href="memcached_8h.html#ad69cc14d059b72c07e1f0b550b1922c6">item_alloc</a>(<span class="keywordtype">char</span> *key, <span class="keywordtype">size_t</span> nkey, <span class="keywordtype">int</span> flags, <a class="code" href="memcached_8h.html#a602ccc3d124c1c56b6afe0ae93e04bc4">rel_time_t</a> exptime, <span class="keywordtype">int</span> nbytes);</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="keywordtype">char</span> *<a class="code" href="memcached_8h.html#a66464e83dfd7f7e38702614fb645ba4c">item_cachedump</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="slabs_8c.html#a89e035684df4bb1ef8b0852cb2c20f00">slabs_clsid</a>, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> limit, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *bytes);</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="keywordtype">void</span>  <a class="code" href="memcached_8h.html#ae00be629a8cd99870497ffc47b40740a">item_flush_expired</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<a class="code" href="struct__stritem.html">item</a> *<a class="code" href="memcached_8h.html#a1ff584f7053e4a5c8f2cffc7186a12aa">item_get</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *key, <span class="keyword">const</span> <span class="keywordtype">size_t</span> nkey);</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<a class="code" href="struct__stritem.html">item</a> *<a class="code" href="memcached_8h.html#a62fd00065ca3a09c9e75810e680b0d81">item_touch</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *key, <span class="keyword">const</span> <span class="keywordtype">size_t</span> nkey, uint32_t exptime);</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="keywordtype">int</span>   <a class="code" href="memcached_8h.html#a9e23e4fb572f5bc484a30eed591f9b36">item_link</a>(<a class="code" href="struct__stritem.html">item</a> *it);</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="keywordtype">void</span>  <a class="code" href="memcached_8h.html#af445e1464df9a37165a06525af3ea31e">item_remove</a>(<a class="code" href="struct__stritem.html">item</a> *it);</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="keywordtype">int</span>   <a class="code" href="memcached_8h.html#a58dccd952eb247b8ece1755a544969d5">item_replace</a>(<a class="code" href="struct__stritem.html">item</a> *it, <a class="code" href="struct__stritem.html">item</a> *new_it, <span class="keyword">const</span> uint32_t hv);</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="keywordtype">void</span>  <a class="code" href="memcached_8h.html#a2b022c04b5ceac327d82762206f51ca8">item_stats</a>(<a class="code" href="memcached_8h.html#ab8d9bd9ba0b7b765633bf9b6cbd6aa30">ADD_STAT</a> add_stats, <span class="keywordtype">void</span> *c);</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="keywordtype">void</span>  <a class="code" href="memcached_8h.html#a06330fa0d2f683b68459dd7b590a242b">item_stats_totals</a>(<a class="code" href="memcached_8h.html#ab8d9bd9ba0b7b765633bf9b6cbd6aa30">ADD_STAT</a> add_stats, <span class="keywordtype">void</span> *c);</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="keywordtype">void</span>  <a class="code" href="memcached_8h.html#a76a67af22fe6ce802c07e857f06cbdc8">item_stats_sizes</a>(<a class="code" href="memcached_8h.html#ab8d9bd9ba0b7b765633bf9b6cbd6aa30">ADD_STAT</a> add_stats, <span class="keywordtype">void</span> *c);</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="keywordtype">void</span>  <a class="code" href="memcached_8h.html#a0c242af4a01ed7d11beacef1ce98775a">item_unlink</a>(<a class="code" href="struct__stritem.html">item</a> *it);</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="keywordtype">void</span>  <a class="code" href="memcached_8h.html#acbd05e36703d8da891e7c1a47a684941">item_update</a>(<a class="code" href="struct__stritem.html">item</a> *it);</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="keywordtype">void</span> <a class="code" href="memcached_8h.html#af0d2ac3e12c7583274b01a67fec39ddd">item_lock_global</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="keywordtype">void</span> <a class="code" href="memcached_8h.html#a53c4150c3d3876bd7a388c52878f09ee">item_unlock_global</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="keywordtype">void</span> <a class="code" href="memcached_8h.html#a81460e7f1c23da8fed01292caa563902">item_lock</a>(uint32_t hv);</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="keywordtype">void</span> *<a class="code" href="memcached_8h.html#a35e2518c5fdcad28ba75d390c6d5a5bc">item_trylock</a>(uint32_t hv);</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="keywordtype">void</span> <a class="code" href="memcached_8h.html#a6d8c55a9e8c73d1e0e5cb0caf4523524">item_trylock_unlock</a>(<span class="keywordtype">void</span> *arg);</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="keywordtype">void</span> <a class="code" href="memcached_8h.html#ac56f57d068486a19d3076780e8b02997">item_unlock</a>(uint32_t hv);</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="keywordtype">void</span> <a class="code" href="memcached_8h.html#aea997b3fadd3c1e6c94cc4fd77a91651">switch_item_lock_type</a>(<span class="keyword">enum</span> <a class="code" href="memcached_8h.html#a31ef3b9551fcd1f3706021a01a8c6943">item_lock_types</a> type);</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="memcached_8h.html#a15a3ef12380b53f49e320374d9bc7e2d">refcount_incr</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> *refcount);</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="memcached_8h.html#af46109f91f97a775b2fcccddc702abcc">refcount_decr</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> *refcount);</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="keywordtype">void</span> <a class="code" href="memcached_8h.html#a841571aaa5b597a35565f8e12d164a59">STATS_LOCK</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="keywordtype">void</span> <a class="code" href="memcached_8h.html#a255149a6925c7daf8dbee2d867a36056">STATS_UNLOCK</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="keywordtype">void</span> <a class="code" href="memcached_8h.html#a7bcb5bc469e4b71ebb523e8e1b7caf95">threadlocal_stats_reset</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="keywordtype">void</span> <a class="code" href="memcached_8h.html#aa2a47a4050d3821422922a7f45611ae9">threadlocal_stats_aggregate</a>(<span class="keyword">struct</span> <a class="code" href="structthread__stats.html">thread_stats</a> *<a class="code" href="structstats.html">stats</a>);</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="keywordtype">void</span> <a class="code" href="memcached_8h.html#a9a8ed232ef10f74bc05293d3435f0b8f">slab_stats_aggregate</a>(<span class="keyword">struct</span> <a class="code" href="structthread__stats.html">thread_stats</a> *<a class="code" href="structstats.html">stats</a>, <span class="keyword">struct</span> <a class="code" href="structslab__stats.html">slab_stats</a> *out);</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="comment">/* Stat processing functions */</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="keywordtype">void</span> <a class="code" href="memcached_8c.html#aca748357457307f8d993dc73c3350afe">append_stat</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *name, <a class="code" href="memcached_8h.html#ab8d9bd9ba0b7b765633bf9b6cbd6aa30">ADD_STAT</a> add_stats, <a class="code" href="structconn.html">conn</a> *c,</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                 <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, ...);</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="keyword">enum</span> <a class="code" href="memcached_8h.html#a1cf8921762294d73fe28150b7fa2a18e">store_item_type</a> <a class="code" href="memcached_8h.html#ac97ce2cadaeb4fe6524c0df01828c232">store_item</a>(<a class="code" href="struct__stritem.html">item</a> *<a class="code" href="struct__stritem.html">item</a>, <span class="keywordtype">int</span> comm, <a class="code" href="structconn.html">conn</a> *c);</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="preprocessor">#if HAVE_DROP_PRIVILEGES</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="preprocessor"></span><span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="memcached_8h.html#a9f5cbeb31c236a1eb0d5c343b2a5568c">drop_privileges</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00565"></a><span class="lineno"><a class="code" href="memcached_8h.html#a9f5cbeb31c236a1eb0d5c343b2a5568c">  565</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define drop_privileges()</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="comment">/* If supported, give compiler hints for branch prediction. */</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="preprocessor">#if !defined(__GNUC__) || (__GNUC__ == 2 &amp;&amp; __GNUC_MINOR__ &lt; 96)</span></div>
<div class="line"><a name="l00570"></a><span class="lineno"><a class="code" href="memcached_8h.html#a2d68e635cffd81dd153ce8330c1b30d4">  570</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define __builtin_expect(x, expected_value) (x)</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00573"></a><span class="lineno"><a class="code" href="memcached_8h.html#a217a0bd562b98ae8c2ffce44935351e1">  573</a></span>&#160;<span class="preprocessor">#define likely(x)       __builtin_expect((x),1)</span></div>
<div class="line"><a name="l00574"></a><span class="lineno"><a class="code" href="memcached_8h.html#ac6c45889010c1bd68631771b64f18101">  574</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define unlikely(x)     __builtin_expect((x),0)</span></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Apr 3 2013 16:10:27 for memcached by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
</small></address>
</body>
</html>
